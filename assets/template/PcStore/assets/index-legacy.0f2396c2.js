!function(){var e=document.createElement("style");e.innerHTML=".card{border-radius:.2em;background-color:#fff}.header{height:2em;line-height:2em;border-bottom:solid 1px #eee;background-color:#fff;padding:.5em 1em;font-size:1.2em}\n",document.head.appendChild(e),System.register(["./vendor-legacy.839ca20f.js"],(function(e){"use strict";var t,a,l,r,i,d,o,n,s,u,p,m,c,f;return{setters:[function(e){t=e.r,a=e.k,l=e.o,r=e.b,i=e.d,d=e.w,o=e.e,n=e.p,s=e.m,u=e.F,p=e.n,m=e.t,c=e.g,f=e.s}],execute:function(){const y=e("default",{data:()=>({DataList:[],type:"1",name:"",page:1,limit:8,Tracking:"",count:1,loading:!1,title:"订单详情",state:!1,OrderData:[],loading2:{},state2:!1,Form:{},FormArr:{},state3:!1,TokenArr:[]}),watch:{type(e,t){this.type===e&&(this.page=1,this.count=0,this.DataListGet())},name(e,t){this.name===e&&(this.page=1,this.count=0,this.DataListGet())},page(e){this.DataListGet()}},created(){this.DataListGet()},methods:{Kami(e){this.TokenArr=[];for(let t=0;t<e.length;t++)this.TokenArr[t]=e[t].token;this.state3=!0},copyText(e){var t=document.createElement("input");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("Copy"),document.body.removeChild(t),this.$message({message:"复制成功",type:"success"})},Message(e){this.$message({message:e,type:"warning"})},Open(e){this.$router.push({path:"goods",query:{gid:e}})},OpenUrl(e){window.open(e)},InputArr(){let e=this.OrderData.data.input;if(0===e.length)return!1;let t={},a={};for(const l in e){let r=e[l].split("：");a[l]={name:r[0],value:r[1]},t[l]=r[1]}this.FormArr=a,this.Form=t,this.state2=!0},Take(e){let t=this;this.$ajax.post("main.php?act=OrderList",{type:"QueryTake",id:e}).then((function(e){t.show2=!1,e.code>=0?(t.$message({message:e.msg,type:"success"}),t.DataListGet()):t.$message({message:e.msg,type:"error"})}))},OrderModification(){let e=this,t={oid:e.OrderData.data.id,order:e.OrderData.data.order,data:[]};for(const a in e.Form){if(""==e.Form[a])return e.$message({message:"请将第"+(a-0+1)+"行输入框填写完整！",type:"error"}),!1;t.data[a]=e.Form[a]}this.$ajax.get("main.php?act=OrderList&type=OrderModification",t).then((function(t){e.state2=!1,1===t.code?(e.$message({message:t.msg,type:"success"}),e.OrderDataGet(e.OrderData.data.id,e.OrderData.data.order,2),e.DataListGet()):e.$message({message:t.msg,type:"error"})}))},DataListGet(){let e=this;this.loading=!0,this.$ajax.post("main.php?act=OrderList",{type:"OrderAll",state:this.type,page:this.page,seek:this.name,limit:this.limit}).then((function(t){if(e.loading=!1,t.code>=0){e.DataList=t.data,e.loading2={};for(let a=0;a<t.data.length;a++)e.loading2[t.data[a].id]=!1;e.Tracking=t.Tracking,e.count=t.count}else e.$message({message:t.msg,type:"error"})}))},OrderDataGet(e,t,a=1){let l=this;this.loading2[e]=!0,this.$ajax.post("main.php?act=OrderList",{type:"QueryDetails",id:e,order:t}).then((function(r){l.loading2[e]=!1,r.code>=0&&(l.OrderData=r,1===a?(l.state=!0,l.title="订单"+t+"详情"):l.$message({message:r.msg,type:"error"}))}))}}}),g={style:{"padding-top":"0.3em"}},h=o("div",{class:"header"},"订单查询",-1),k={class:"card",style:{padding:"1.5em"}},w={style:{padding:"0.8em"}},_=c("已完成"),O=c("待发货"),D=c("异常中"),b=c("正在处理"),C=c("已退款"),x=c("售后中"),v=c("已评价"),z=c("未知状态"),T=["onClick"],A=c("商品已丢失"),V={style:{"font-size":"110%"}},L={key:0},$={key:0,style:{color:"#ff0000"}},U={key:1},F={style:{color:"red","margin-right":"0.5rem","font-size":"1.2rem"}},G={style:{"font-size":"0.8rem","text-decoration":"line-through",color:"#8f9298"}},j={key:1,style:{color:"darkorange"}},M={style:{"font-size":"0.6rem","margin-left":"0.1rem"}},H={key:2,style:{color:"#07C160"}},q={key:3},E={key:0,style:{color:"#ff0000"}},I={key:1},S={style:{color:"#ff0000","margin-right":"0.5rem","font-size":"1.2rem"}},K={style:{"font-size":"0.8rem","text-decoration":"line-through",color:"#8f9298"}},Q={style:{"text-align":"center"}},N=c(" 详情 "),P=c("卡密"),B=c("反馈"),J=c("收货"),R=c("售后"),W={style:{"text-align":"center","margin-top":"1em"}},X={style:{padding:"1em"}},Y=c(" 订单状态 "),Z=c(" 初始数量 "),ee=c(" 下单数量 "),te=c(" 当前数量 "),ae=c(" 提交时间 "),le=c(" 备注信息 "),re=c(" 收货信息修改 "),ie=c("主机后台"),de=c("发起工单"),oe=c(" 订单编号 "),ne=c(" 商品名称 "),se=c(" 订单状态 "),ue=c(" 购买份数 "),pe=c(" 每份数量 "),me=c(" 付款方式 "),ce=c(" 实付金额 "),fe=c(" 优惠金额 "),ye=c(" 订单原价 "),ge=c(" 优惠券ID "),he=c(" 创建时间 "),ke=c(" 商品说明 "),we=["innerHTML"],_e={class:"dialog-footer"},Oe=c("关闭"),De=c("复制全部"),be={class:"dialog-footer"},Ce=c("取消"),xe=c("保存");y.render=function(e,y,ve,ze,Te,Ae){const Ve=t("el-option"),Le=t("el-select"),$e=t("el-form-item"),Ue=t("el-input"),Fe=t("el-form"),Ge=t("el-tag"),je=t("el-table-column"),Me=t("n-ellipsis"),He=t("el-button"),qe=t("el-popconfirm"),Ee=t("el-table"),Ie=t("n-pagination"),Se=t("el-col"),Ke=t("el-row"),Qe=t("el-descriptions-item"),Ne=t("el-descriptions"),Pe=t("el-card"),Be=t("el-scrollbar"),Je=t("el-drawer"),Re=t("el-dialog"),We=a("loading");return l(),r("div",g,[i(Ke,{gutter:20},{default:d((()=>[i(Se,{span:24},{default:d((()=>[h,o("div",k,[o("div",w,[i(Fe,{inline:!0,class:"demo-form-inline"},{default:d((()=>[i($e,{label:"订单状态"},{default:d((()=>[i(Le,{modelValue:Te.type,"onUpdate:modelValue":y[0]||(y[0]=e=>Te.type=e),size:"medium",placeholder:"订单状态"},{default:d((()=>[i(Ve,{label:"全部",value:"1"}),i(Ve,{label:"未完成",value:"2"}),i(Ve,{label:"待收货",value:"3"}),i(Ve,{label:"已收货",value:"4"}),i(Ve,{label:"已取消",value:"5"})])),_:1},8,["modelValue"])])),_:1}),i($e,{label:"下单信息"},{default:d((()=>[i(Ue,{modelValue:Te.name,"onUpdate:modelValue":y[1]||(y[1]=e=>Te.name=e),size:"medium",placeholder:"请输入下单信息"},null,8,["modelValue"])])),_:1})])),_:1})]),n(i(Ee,{data:Te.DataList,style:{width:"100%"}},{default:d((()=>[i(je,{fixed:"",width:"100",label:"订单状态"},{default:d((e=>[1==e.row.state?(l(),s(Ge,{key:0,type:"success"},{default:d((()=>[_])),_:1})):2==e.row.state?(l(),s(Ge,{key:1},{default:d((()=>[O])),_:1})):3==e.row.state?(l(),s(Ge,{key:2,type:"danger"},{default:d((()=>[D])),_:1})):4==e.row.state?(l(),s(Ge,{key:3,type:"warning"},{default:d((()=>[b])),_:1})):5==e.row.state?(l(),s(Ge,{key:4,type:"info"},{default:d((()=>[C])),_:1})):6==e.row.state?(l(),s(Ge,{key:5,type:"danger"},{default:d((()=>[x])),_:1})):7==e.row.state?(l(),s(Ge,{key:6,type:"success"},{default:d((()=>[v])),_:1})):(l(),s(Ge,{key:7,type:"info"},{default:d((()=>[z])),_:1}))])),_:1}),i(je,{width:"150",label:"下单参数"},{default:d((e=>[(l(!0),r(u,null,p(e.row.input,((t,a)=>(l(),r("div",{style:{color:"#55557f","font-size":"12px"},key:a},m(null==e.row.value[a]?"输入框"+(a-0+1):e.row.value[a])+"："+m(t),1)))),128))])),_:1}),i(je,{width:"150",label:"商品名称"},{default:d((e=>[e.row.name?(l(),s(Me,{key:0,style:{"max-width":"150px",color:"#5555ff"}},{default:d((()=>[o("span",{style:{cursor:"pointer"},onClick:t=>Ae.Open(e.row.gid)},m(e.row.name),9,T)])),_:2},1024)):(l(),s(Me,{key:1,style:{"max-width":"150px",color:"red","font-size":"12px"}},{default:d((()=>[A])),_:1}))])),_:1}),i(je,{label:"订单金额",width:"150"},{default:d((e=>[o("div",V,["余额付款"==e.row.payment?(l(),r("span",L,[-1==e.row.coupon?(l(),r("span",$,"￥"+m(e.row.price),1)):(l(),r("span",U,[o("span",F,"￥"+m(e.row.price),1),o("span",G,m(e.row.originalprice)+"元",1)]))])):"积分兑换"==e.row.payment?(l(),r("span",j,[c(m(e.row.price)+" ",1),o("span",M,m(e.row.currency),1)])):"免费领取"==e.row.payment?(l(),r("span",H,"免费商品")):(l(),r("span",q,[-1==e.row.coupon?(l(),r("span",E,"￥"+m(e.row.price),1)):(l(),r("span",I,[o("span",S,"￥"+m(e.row.price),1),o("span",K,m(e.row.originalprice)+"元",1)]))]))])])),_:1}),i(je,{label:"发货数",width:"100"},{default:d((e=>[i(Ge,{type:"info",size:"small"},{default:d((()=>[c(m(e.row.quantity*e.row.num)+m(e.row.units),1)])),_:2},1024)])),_:1}),i(je,{label:"订单号",width:"200",prop:"order"}),i(je,{label:"下单时间",width:"200",prop:"addtime"}),i(je,{label:"处理时间",width:"200",prop:"endtime"}),i(je,{fixed:"right",label:"操作",width:"220"},{default:d((e=>[o("div",Q,[i(He,{size:"mini",onClick:t=>Ae.OrderDataGet(e.row.id,e.row.order),type:"primary",loading:Te.loading2[e.row.id],plain:""},{default:d((()=>[N])),_:2},1032,["onClick","loading"]),e.row.Token.length>=1?(l(),s(He,{key:0,size:"mini",onClick:t=>Ae.Kami(e.row.Token),plain:"",type:"danger"},{default:d((()=>[P])),_:2},1032,["onClick"])):f("",!0),-1!=e.row.remark?(l(),s(He,{key:1,size:"mini",onClick:t=>Ae.Message(e.row.remark),type:"warning",plain:""},{default:d((()=>[B])),_:2},1032,["onClick"])):f("",!0),-1!=e.row.logistics?(l(),s(He,{key:2,onClick:t=>Ae.OpenUrl(Te.Tracking+e.row.logistics.order),size:"mini",type:"success",plain:""},{default:d((()=>[c(m(e.row.logistics.name),1)])),_:2},1032,["onClick"])):f("",!0),1==e.row.take&&1==e.row.state?(l(),s(qe,{key:3,title:"确认收货吗?",onConfirm:t=>Ae.Take(e.row.id)},{reference:d((()=>[i(He,{size:"mini",plain:"",type:"success"},{default:d((()=>[J])),_:1})])),_:2},1032,["onConfirm"])):f("",!0),1==e.row.take&&1!=e.row.state&&5!=e.row.state&&7!=e.row.state?(l(),s(qe,{key:4,title:"确认要发起售后工单吗?",onConfirm:t=>Ae.OpenUrl("./user/tickets_new.php?id="+e.row.id)},{reference:d((()=>[i(He,{size:"mini",plain:"",type:"danger"},{default:d((()=>[R])),_:1})])),_:2},1032,["onConfirm"])):f("",!0)])])),_:1})])),_:1},8,["data"]),[[We,Te.loading]]),o("div",W,[i(Ie,{"show-quick-jumper":"","page-size":Te.limit,"item-count":Te.count,page:Te.page,"onUpdate:page":y[2]||(y[2]=e=>Te.page=e)},null,8,["page-size","item-count","page"])])])])),_:1})])),_:1}),i(Je,{withHeader:!1,size:"500px",modelValue:Te.state,"onUpdate:modelValue":y[9]||(y[9]=e=>Te.state=e),direction:"rtl"},{default:d((()=>[o("div",X,[i(Be,{height:"96vh"},{default:d((()=>[1==Te.OrderData.data.ApiSn?(l(),s(Ne,{key:0,style:{"margin-bottom":"1em"},class:"margin-top",title:"订单完成进度[实时]",column:3,border:""},{default:d((()=>[i(Qe,null,{label:d((()=>[Y])),default:d((()=>[c(" "+m(Te.OrderData.data.ApiState),1)])),_:1}),i(Qe,null,{label:d((()=>[Z])),default:d((()=>[c(" "+m(Te.OrderData.data.ApiInitial),1)])),_:1}),i(Qe,null,{label:d((()=>[ee])),default:d((()=>[c(" "+m(Te.OrderData.data.ApiNum),1)])),_:1}),i(Qe,null,{label:d((()=>[te])),default:d((()=>[c(" "+m(Te.OrderData.data.ApiPresent),1)])),_:1}),i(Qe,null,{label:d((()=>[ae])),default:d((()=>[c(" "+m(Te.OrderData.data.ApiTime),1)])),_:1}),"无"!=Te.OrderData.data.ApiError?(l(),s(Qe,{key:0},{label:d((()=>[le])),default:d((()=>[o("span",null,m(Te.OrderData.data.ApiError),1)])),_:1})):f("",!0)])),_:1})):f("",!0),i(Ne,{title:Te.title,column:2,border:""},{extra:d((()=>[2!=Te.OrderData.data.stateid&&3!=Te.OrderData.data.stateid||1!=Te.OrderData.OrderModification?f("",!0):(l(),s(He,{key:0,onClick:y[3]||(y[3]=e=>Ae.InputArr()),type:"primary",size:"small"},{default:d((()=>[re])),_:1})),1==Te.OrderData.data.HostType?(l(),s(He,{key:1,onClick:y[4]||(y[4]=e=>Ae.OpenUrl("./HostAdmin")),type:"warning",size:"small"},{default:d((()=>[ie])),_:1})):f("",!0),i(He,{onClick:y[5]||(y[5]=e=>Ae.OpenUrl("./user/tickets_new.php?id="+Te.OrderData.data.id)),type:"danger",size:"small"},{default:d((()=>[de])),_:1})])),default:d((()=>[i(Qe,null,{label:d((()=>[oe])),default:d((()=>[o("span",{onClick:y[6]||(y[6]=e=>Ae.copyText(Te.OrderData.data.order))},m(Te.OrderData.data.order),1)])),_:1}),i(Qe,null,{label:d((()=>[ne])),default:d((()=>[c(" "+m(Te.OrderData.data.name),1)])),_:1}),i(Qe,null,{label:d((()=>[se])),default:d((()=>[c(" "+m(Te.OrderData.data.state),1)])),_:1}),i(Qe,null,{label:d((()=>[ue])),default:d((()=>[c(" "+m(Te.OrderData.data.num)+"份 ",1)])),_:1}),i(Qe,null,{label:d((()=>[pe])),default:d((()=>[c(" "+m(Te.OrderData.data.quantity+Te.OrderData.data.units),1)])),_:1}),i(Qe,null,{label:d((()=>[me])),default:d((()=>[c(" "+m(Te.OrderData.data.type),1)])),_:1}),i(Qe,null,{label:d((()=>[ce])),default:d((()=>[c(" "+m(0==Te.OrderData.data.price?"0元":Te.OrderData.data.price+"元"),1)])),_:1}),-1!=Te.OrderData.data.coupon?(l(),s(Qe,{key:0},{label:d((()=>[fe])),default:d((()=>[c(" "+m(Te.OrderData.data.discounts+"元"),1)])),_:1})):f("",!0),-1!=Te.OrderData.data.coupon?(l(),s(Qe,{key:1},{label:d((()=>[ye])),default:d((()=>[c(" "+m(Te.OrderData.data.originalprice)+"元 ",1)])),_:1})):f("",!0),-1!=Te.OrderData.data.coupon?(l(),s(Qe,{key:2},{label:d((()=>[ge])),default:d((()=>[c(" "+m(Te.OrderData.data.coupon+"号"),1)])),_:1})):f("",!0),i(Qe,null,{label:d((()=>[he])),default:d((()=>[c(" "+m(Te.OrderData.data.addtiem),1)])),_:1})])),_:1},8,["title"]),-1!=Te.OrderData.data.token_arr?(l(),s(Ne,{key:1,style:{"margin-top":"1em"},onClick:y[7]||(y[7]=e=>Ae.copyText(Te.OrderData.data.token_arr.join(" - "))),title:"卡密信息",column:1,border:""},{default:d((()=>[(l(!0),r(u,null,p(Te.OrderData.data.token_arr,((e,t)=>(l(),s(Qe,{key:t},{label:d((()=>[c(m("卡"+(t+1)),1)])),default:d((()=>[c(" "+m(e),1)])),_:2},1024)))),128))])),_:1})):f("",!0),i(Ne,{onClick:y[8]||(y[8]=e=>Ae.copyText(Te.OrderData.data.input.join(" - "))),style:{"margin-top":"1em"},title:"收货信息",column:3,border:""},{default:d((()=>[(l(!0),r(u,null,p(Te.OrderData.data.input,((e,t)=>(l(),s(Qe,{key:t},{label:d((()=>[c(m(e.split("：")[0]),1)])),default:d((()=>[c(" "+m(e.split("：")[1]),1)])),_:2},1024)))),128))])),_:1}),i(Pe,{style:{"margin-top":"2em"}},{header:d((()=>[ke])),default:d((()=>[o("div",{innerHTML:Te.OrderData.data.docs},null,8,we)])),_:1})])),_:1})])])),_:1},8,["modelValue"]),i(Re,{modelValue:Te.state3,"onUpdate:modelValue":y[12]||(y[12]=e=>Te.state3=e),title:"卡密信息",width:"400px"},{footer:d((()=>[o("span",_e,[i(He,{onClick:y[10]||(y[10]=e=>Te.state3=!1)},{default:d((()=>[Oe])),_:1}),i(He,{type:"primary",onClick:y[11]||(y[11]=e=>Ae.copyText(Te.TokenArr.join(" - ")))},{default:d((()=>[De])),_:1})])])),default:d((()=>[i(Ne,{column:1,border:""},{default:d((()=>[(l(!0),r(u,null,p(Te.TokenArr,((e,t)=>(l(),s(Qe,{key:t},{label:d((()=>[c(m("卡"+(t+1)),1)])),default:d((()=>[c(" "+m(e),1)])),_:2},1024)))),128))])),_:1})])),_:1},8,["modelValue"]),i(Re,{modelValue:Te.state2,"onUpdate:modelValue":y[15]||(y[15]=e=>Te.state2=e),title:"修改收货信息",width:"400px"},{footer:d((()=>[o("span",be,[i(He,{onClick:y[13]||(y[13]=e=>Te.state2=!1)},{default:d((()=>[Ce])),_:1}),i(He,{type:"primary",onClick:y[14]||(y[14]=e=>Ae.OrderModification())},{default:d((()=>[xe])),_:1})])])),default:d((()=>[i(Fe,{ref:"form",model:Te.Form},{default:d((()=>[(l(!0),r(u,null,p(Te.FormArr,((e,t)=>(l(),s($e,{key:t,label:e.name},{default:d((()=>[i(Ue,{modelValue:Te.Form[t],"onUpdate:modelValue":e=>Te.Form[t]=e},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["label"])))),128))])),_:1},8,["model"])])),_:1},8,["modelValue"])])}}}}))}();
