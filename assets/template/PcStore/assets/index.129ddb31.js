import{r as e,k as a,o as t,b as l,d as r,w as i,e as d,p as o,m as n,F as s,n as p,t as u,g as m,s as c}from"./vendor.caf54732.js";const f={data:()=>({DataList:[],type:"1",name:"",page:1,limit:8,Tracking:"",count:1,loading:!1,title:"订单详情",state:!1,OrderData:[],loading2:{},state2:!1,Form:{},FormArr:{},state3:!1,TokenArr:[]}),watch:{type(e,a){this.type===e&&(this.page=1,this.count=0,this.DataListGet())},name(e,a){this.name===e&&(this.page=1,this.count=0,this.DataListGet())},page(e){this.DataListGet()}},created(){this.DataListGet()},methods:{Kami(e){this.TokenArr=[];for(let a=0;a<e.length;a++)this.TokenArr[a]=e[a].token;this.state3=!0},copyText(e){var a=document.createElement("input");a.value=e,document.body.appendChild(a),a.select(),document.execCommand("Copy"),document.body.removeChild(a),this.$message({message:"复制成功",type:"success"})},Message(e){this.$message({message:e,type:"warning"})},Open(e){this.$router.push({path:"goods",query:{gid:e}})},OpenUrl(e){window.open(e)},InputArr(){let e=this.OrderData.data.input;if(0===e.length)return!1;let a={},t={};for(const l in e){let r=e[l].split("：");t[l]={name:r[0],value:r[1]},a[l]=r[1]}this.FormArr=t,this.Form=a,this.state2=!0},Take(e){let a=this;this.$ajax.post("main.php?act=OrderList",{type:"QueryTake",id:e}).then((function(e){a.show2=!1,e.code>=0?(a.$message({message:e.msg,type:"success"}),a.DataListGet()):a.$message({message:e.msg,type:"error"})}))},OrderModification(){let e=this,a={oid:e.OrderData.data.id,order:e.OrderData.data.order,data:[]};for(const t in e.Form){if(""==e.Form[t])return e.$message({message:"请将第"+(t-0+1)+"行输入框填写完整！",type:"error"}),!1;a.data[t]=e.Form[t]}this.$ajax.get("main.php?act=OrderList&type=OrderModification",a).then((function(a){e.state2=!1,1===a.code?(e.$message({message:a.msg,type:"success"}),e.OrderDataGet(e.OrderData.data.id,e.OrderData.data.order,2),e.DataListGet()):e.$message({message:a.msg,type:"error"})}))},DataListGet(){let e=this;this.loading=!0,this.$ajax.post("main.php?act=OrderList",{type:"OrderAll",state:this.type,page:this.page,seek:this.name,limit:this.limit}).then((function(a){if(e.loading=!1,a.code>=0){e.DataList=a.data,e.loading2={};for(let t=0;t<a.data.length;t++)e.loading2[a.data[t].id]=!1;e.Tracking=a.Tracking,e.count=a.count}else e.$message({message:a.msg,type:"error"})}))},OrderDataGet(e,a,t=1){let l=this;this.loading2[e]=!0,this.$ajax.post("main.php?act=OrderList",{type:"QueryDetails",id:e,order:a}).then((function(r){l.loading2[e]=!1,r.code>=0&&(l.OrderData=r,1===t?(l.state=!0,l.title="订单"+a+"详情"):l.$message({message:r.msg,type:"error"}))}))}}},y={style:{"padding-top":"0.3em"}},g=d("div",{class:"header"},"订单查询",-1),h={class:"card",style:{padding:"1.5em"}},k={style:{padding:"0.8em"}},w=m("已完成"),_=m("待发货"),O=m("异常中"),D=m("正在处理"),b=m("已退款"),C=m("售后中"),x=m("已评价"),v=m("未知状态"),z=["onClick"],T=m("商品已丢失"),A={style:{"font-size":"110%"}},V={key:0},L={key:0,style:{color:"#ff0000"}},$={key:1},U={style:{color:"red","margin-right":"0.5rem","font-size":"1.2rem"}},F={style:{"font-size":"0.8rem","text-decoration":"line-through",color:"#8f9298"}},G={key:1,style:{color:"darkorange"}},j={style:{"font-size":"0.6rem","margin-left":"0.1rem"}},M={key:2,style:{color:"#07C160"}},H={key:3},q={key:0,style:{color:"#ff0000"}},I={key:1},E={style:{color:"#ff0000","margin-right":"0.5rem","font-size":"1.2rem"}},K={style:{"font-size":"0.8rem","text-decoration":"line-through",color:"#8f9298"}},Q={style:{"text-align":"center"}},S=m(" 详情 "),N=m("卡密"),P=m("反馈"),B=m("收货"),J=m("售后"),R={style:{"text-align":"center","margin-top":"1em"}},W={style:{padding:"1em"}},X=m(" 订单状态 "),Y=m(" 初始数量 "),Z=m(" 下单数量 "),ee=m(" 当前数量 "),ae=m(" 提交时间 "),te=m(" 备注信息 "),le=m(" 收货信息修改 "),re=m("主机后台"),ie=m("发起工单"),de=m(" 订单编号 "),oe=m(" 商品名称 "),ne=m(" 订单状态 "),se=m(" 购买份数 "),pe=m(" 每份数量 "),ue=m(" 付款方式 "),me=m(" 实付金额 "),ce=m(" 优惠金额 "),fe=m(" 订单原价 "),ye=m(" 优惠券ID "),ge=m(" 创建时间 "),he=m(" 商品说明 "),ke=["innerHTML"],we={class:"dialog-footer"},_e=m("关闭"),Oe=m("复制全部"),De={class:"dialog-footer"},be=m("取消"),Ce=m("保存");f.render=function(f,xe,ve,ze,Te,Ae){const Ve=e("el-option"),Le=e("el-select"),$e=e("el-form-item"),Ue=e("el-input"),Fe=e("el-form"),Ge=e("el-tag"),je=e("el-table-column"),Me=e("n-ellipsis"),He=e("el-button"),qe=e("el-popconfirm"),Ie=e("el-table"),Ee=e("n-pagination"),Ke=e("el-col"),Qe=e("el-row"),Se=e("el-descriptions-item"),Ne=e("el-descriptions"),Pe=e("el-card"),Be=e("el-scrollbar"),Je=e("el-drawer"),Re=e("el-dialog"),We=a("loading");return t(),l("div",y,[r(Qe,{gutter:20},{default:i((()=>[r(Ke,{span:24},{default:i((()=>[g,d("div",h,[d("div",k,[r(Fe,{inline:!0,class:"demo-form-inline"},{default:i((()=>[r($e,{label:"订单状态"},{default:i((()=>[r(Le,{modelValue:Te.type,"onUpdate:modelValue":xe[0]||(xe[0]=e=>Te.type=e),size:"medium",placeholder:"订单状态"},{default:i((()=>[r(Ve,{label:"全部",value:"1"}),r(Ve,{label:"未完成",value:"2"}),r(Ve,{label:"待收货",value:"3"}),r(Ve,{label:"已收货",value:"4"}),r(Ve,{label:"已取消",value:"5"})])),_:1},8,["modelValue"])])),_:1}),r($e,{label:"下单信息"},{default:i((()=>[r(Ue,{modelValue:Te.name,"onUpdate:modelValue":xe[1]||(xe[1]=e=>Te.name=e),size:"medium",placeholder:"请输入下单信息"},null,8,["modelValue"])])),_:1})])),_:1})]),o(r(Ie,{data:Te.DataList,style:{width:"100%"}},{default:i((()=>[r(je,{fixed:"",width:"100",label:"订单状态"},{default:i((e=>[1==e.row.state?(t(),n(Ge,{key:0,type:"success"},{default:i((()=>[w])),_:1})):2==e.row.state?(t(),n(Ge,{key:1},{default:i((()=>[_])),_:1})):3==e.row.state?(t(),n(Ge,{key:2,type:"danger"},{default:i((()=>[O])),_:1})):4==e.row.state?(t(),n(Ge,{key:3,type:"warning"},{default:i((()=>[D])),_:1})):5==e.row.state?(t(),n(Ge,{key:4,type:"info"},{default:i((()=>[b])),_:1})):6==e.row.state?(t(),n(Ge,{key:5,type:"danger"},{default:i((()=>[C])),_:1})):7==e.row.state?(t(),n(Ge,{key:6,type:"success"},{default:i((()=>[x])),_:1})):(t(),n(Ge,{key:7,type:"info"},{default:i((()=>[v])),_:1}))])),_:1}),r(je,{width:"150",label:"下单参数"},{default:i((e=>[(t(!0),l(s,null,p(e.row.input,((a,r)=>(t(),l("div",{style:{color:"#55557f","font-size":"12px"},key:r},u(null==e.row.value[r]?"输入框"+(r-0+1):e.row.value[r])+"："+u(a),1)))),128))])),_:1}),r(je,{width:"150",label:"商品名称"},{default:i((e=>[e.row.name?(t(),n(Me,{key:0,style:{"max-width":"150px",color:"#5555ff"}},{default:i((()=>[d("span",{style:{cursor:"pointer"},onClick:a=>Ae.Open(e.row.gid)},u(e.row.name),9,z)])),_:2},1024)):(t(),n(Me,{key:1,style:{"max-width":"150px",color:"red","font-size":"12px"}},{default:i((()=>[T])),_:1}))])),_:1}),r(je,{label:"订单金额",width:"150"},{default:i((e=>[d("div",A,["余额付款"==e.row.payment?(t(),l("span",V,[-1==e.row.coupon?(t(),l("span",L,"￥"+u(e.row.price),1)):(t(),l("span",$,[d("span",U,"￥"+u(e.row.price),1),d("span",F,u(e.row.originalprice)+"元",1)]))])):"积分兑换"==e.row.payment?(t(),l("span",G,[m(u(e.row.price)+" ",1),d("span",j,u(e.row.currency),1)])):"免费领取"==e.row.payment?(t(),l("span",M,"免费商品")):(t(),l("span",H,[-1==e.row.coupon?(t(),l("span",q,"￥"+u(e.row.price),1)):(t(),l("span",I,[d("span",E,"￥"+u(e.row.price),1),d("span",K,u(e.row.originalprice)+"元",1)]))]))])])),_:1}),r(je,{label:"发货数",width:"100"},{default:i((e=>[r(Ge,{type:"info",size:"small"},{default:i((()=>[m(u(e.row.quantity*e.row.num)+u(e.row.units),1)])),_:2},1024)])),_:1}),r(je,{label:"订单号",width:"200",prop:"order"}),r(je,{label:"下单时间",width:"200",prop:"addtime"}),r(je,{label:"处理时间",width:"200",prop:"endtime"}),r(je,{fixed:"right",label:"操作",width:"220"},{default:i((e=>[d("div",Q,[r(He,{size:"mini",onClick:a=>Ae.OrderDataGet(e.row.id,e.row.order),type:"primary",loading:Te.loading2[e.row.id],plain:""},{default:i((()=>[S])),_:2},1032,["onClick","loading"]),e.row.Token.length>=1?(t(),n(He,{key:0,size:"mini",onClick:a=>Ae.Kami(e.row.Token),plain:"",type:"danger"},{default:i((()=>[N])),_:2},1032,["onClick"])):c("",!0),-1!=e.row.remark?(t(),n(He,{key:1,size:"mini",onClick:a=>Ae.Message(e.row.remark),type:"warning",plain:""},{default:i((()=>[P])),_:2},1032,["onClick"])):c("",!0),-1!=e.row.logistics?(t(),n(He,{key:2,onClick:a=>Ae.OpenUrl(Te.Tracking+e.row.logistics.order),size:"mini",type:"success",plain:""},{default:i((()=>[m(u(e.row.logistics.name),1)])),_:2},1032,["onClick"])):c("",!0),1==e.row.take&&1==e.row.state?(t(),n(qe,{key:3,title:"确认收货吗?",onConfirm:a=>Ae.Take(e.row.id)},{reference:i((()=>[r(He,{size:"mini",plain:"",type:"success"},{default:i((()=>[B])),_:1})])),_:2},1032,["onConfirm"])):c("",!0),1==e.row.take&&1!=e.row.state&&5!=e.row.state&&7!=e.row.state?(t(),n(qe,{key:4,title:"确认要发起售后工单吗?",onConfirm:a=>Ae.OpenUrl("./user/tickets_new.php?id="+e.row.id)},{reference:i((()=>[r(He,{size:"mini",plain:"",type:"danger"},{default:i((()=>[J])),_:1})])),_:2},1032,["onConfirm"])):c("",!0)])])),_:1})])),_:1},8,["data"]),[[We,Te.loading]]),d("div",R,[r(Ee,{"show-quick-jumper":"","page-size":Te.limit,"item-count":Te.count,page:Te.page,"onUpdate:page":xe[2]||(xe[2]=e=>Te.page=e)},null,8,["page-size","item-count","page"])])])])),_:1})])),_:1}),r(Je,{withHeader:!1,size:"500px",modelValue:Te.state,"onUpdate:modelValue":xe[9]||(xe[9]=e=>Te.state=e),direction:"rtl"},{default:i((()=>[d("div",W,[r(Be,{height:"96vh"},{default:i((()=>[1==Te.OrderData.data.ApiSn?(t(),n(Ne,{key:0,style:{"margin-bottom":"1em"},class:"margin-top",title:"订单完成进度[实时]",column:3,border:""},{default:i((()=>[r(Se,null,{label:i((()=>[X])),default:i((()=>[m(" "+u(Te.OrderData.data.ApiState),1)])),_:1}),r(Se,null,{label:i((()=>[Y])),default:i((()=>[m(" "+u(Te.OrderData.data.ApiInitial),1)])),_:1}),r(Se,null,{label:i((()=>[Z])),default:i((()=>[m(" "+u(Te.OrderData.data.ApiNum),1)])),_:1}),r(Se,null,{label:i((()=>[ee])),default:i((()=>[m(" "+u(Te.OrderData.data.ApiPresent),1)])),_:1}),r(Se,null,{label:i((()=>[ae])),default:i((()=>[m(" "+u(Te.OrderData.data.ApiTime),1)])),_:1}),"无"!=Te.OrderData.data.ApiError?(t(),n(Se,{key:0},{label:i((()=>[te])),default:i((()=>[d("span",null,u(Te.OrderData.data.ApiError),1)])),_:1})):c("",!0)])),_:1})):c("",!0),r(Ne,{title:Te.title,column:2,border:""},{extra:i((()=>[2!=Te.OrderData.data.stateid&&3!=Te.OrderData.data.stateid||1!=Te.OrderData.OrderModification?c("",!0):(t(),n(He,{key:0,onClick:xe[3]||(xe[3]=e=>Ae.InputArr()),type:"primary",size:"small"},{default:i((()=>[le])),_:1})),1==Te.OrderData.data.HostType?(t(),n(He,{key:1,onClick:xe[4]||(xe[4]=e=>Ae.OpenUrl("./HostAdmin")),type:"warning",size:"small"},{default:i((()=>[re])),_:1})):c("",!0),r(He,{onClick:xe[5]||(xe[5]=e=>Ae.OpenUrl("./user/tickets_new.php?id="+Te.OrderData.data.id)),type:"danger",size:"small"},{default:i((()=>[ie])),_:1})])),default:i((()=>[r(Se,null,{label:i((()=>[de])),default:i((()=>[d("span",{onClick:xe[6]||(xe[6]=e=>Ae.copyText(Te.OrderData.data.order))},u(Te.OrderData.data.order),1)])),_:1}),r(Se,null,{label:i((()=>[oe])),default:i((()=>[m(" "+u(Te.OrderData.data.name),1)])),_:1}),r(Se,null,{label:i((()=>[ne])),default:i((()=>[m(" "+u(Te.OrderData.data.state),1)])),_:1}),r(Se,null,{label:i((()=>[se])),default:i((()=>[m(" "+u(Te.OrderData.data.num)+"份 ",1)])),_:1}),r(Se,null,{label:i((()=>[pe])),default:i((()=>[m(" "+u(Te.OrderData.data.quantity+Te.OrderData.data.units),1)])),_:1}),r(Se,null,{label:i((()=>[ue])),default:i((()=>[m(" "+u(Te.OrderData.data.type),1)])),_:1}),r(Se,null,{label:i((()=>[me])),default:i((()=>[m(" "+u(0==Te.OrderData.data.price?"0元":Te.OrderData.data.price+"元"),1)])),_:1}),-1!=Te.OrderData.data.coupon?(t(),n(Se,{key:0},{label:i((()=>[ce])),default:i((()=>[m(" "+u(Te.OrderData.data.discounts+"元"),1)])),_:1})):c("",!0),-1!=Te.OrderData.data.coupon?(t(),n(Se,{key:1},{label:i((()=>[fe])),default:i((()=>[m(" "+u(Te.OrderData.data.originalprice)+"元 ",1)])),_:1})):c("",!0),-1!=Te.OrderData.data.coupon?(t(),n(Se,{key:2},{label:i((()=>[ye])),default:i((()=>[m(" "+u(Te.OrderData.data.coupon+"号"),1)])),_:1})):c("",!0),r(Se,null,{label:i((()=>[ge])),default:i((()=>[m(" "+u(Te.OrderData.data.addtiem),1)])),_:1})])),_:1},8,["title"]),-1!=Te.OrderData.data.token_arr?(t(),n(Ne,{key:1,style:{"margin-top":"1em"},onClick:xe[7]||(xe[7]=e=>Ae.copyText(Te.OrderData.data.token_arr.join(" - "))),title:"卡密信息",column:1,border:""},{default:i((()=>[(t(!0),l(s,null,p(Te.OrderData.data.token_arr,((e,a)=>(t(),n(Se,{key:a},{label:i((()=>[m(u("卡"+(a+1)),1)])),default:i((()=>[m(" "+u(e),1)])),_:2},1024)))),128))])),_:1})):c("",!0),r(Ne,{onClick:xe[8]||(xe[8]=e=>Ae.copyText(Te.OrderData.data.input.join(" - "))),style:{"margin-top":"1em"},title:"收货信息",column:3,border:""},{default:i((()=>[(t(!0),l(s,null,p(Te.OrderData.data.input,((e,a)=>(t(),n(Se,{key:a},{label:i((()=>[m(u(e.split("：")[0]),1)])),default:i((()=>[m(" "+u(e.split("：")[1]),1)])),_:2},1024)))),128))])),_:1}),r(Pe,{style:{"margin-top":"2em"}},{header:i((()=>[he])),default:i((()=>[d("div",{innerHTML:Te.OrderData.data.docs},null,8,ke)])),_:1})])),_:1})])])),_:1},8,["modelValue"]),r(Re,{modelValue:Te.state3,"onUpdate:modelValue":xe[12]||(xe[12]=e=>Te.state3=e),title:"卡密信息",width:"400px"},{footer:i((()=>[d("span",we,[r(He,{onClick:xe[10]||(xe[10]=e=>Te.state3=!1)},{default:i((()=>[_e])),_:1}),r(He,{type:"primary",onClick:xe[11]||(xe[11]=e=>Ae.copyText(Te.TokenArr.join(" - ")))},{default:i((()=>[Oe])),_:1})])])),default:i((()=>[r(Ne,{column:1,border:""},{default:i((()=>[(t(!0),l(s,null,p(Te.TokenArr,((e,a)=>(t(),n(Se,{key:a},{label:i((()=>[m(u("卡"+(a+1)),1)])),default:i((()=>[m(" "+u(e),1)])),_:2},1024)))),128))])),_:1})])),_:1},8,["modelValue"]),r(Re,{modelValue:Te.state2,"onUpdate:modelValue":xe[15]||(xe[15]=e=>Te.state2=e),title:"修改收货信息",width:"400px"},{footer:i((()=>[d("span",De,[r(He,{onClick:xe[13]||(xe[13]=e=>Te.state2=!1)},{default:i((()=>[be])),_:1}),r(He,{type:"primary",onClick:xe[14]||(xe[14]=e=>Ae.OrderModification())},{default:i((()=>[Ce])),_:1})])])),default:i((()=>[r(Fe,{ref:"form",model:Te.Form},{default:i((()=>[(t(!0),l(s,null,p(Te.FormArr,((e,a)=>(t(),n($e,{key:a,label:e.name},{default:i((()=>[r(Ue,{modelValue:Te.Form[a],"onUpdate:modelValue":e=>Te.Form[a]=e},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["label"])))),128))])),_:1},8,["model"])])),_:1},8,["modelValue"])])};export{f as default};
