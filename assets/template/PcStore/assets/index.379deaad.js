import("data:text/javascript;base64,Cg==");import{c as e,a as t,r as a,o,b as s,d as r,w as i,e as n,t as l,f as c,g as d,h as u,l as p,E as h,i as m,j as f,z as g,N as y,V as _}from"./vendor.caf54732.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const S={},L=function(e,t){return t&&0!==t.length?Promise.all(t.map((e=>{if((e=`./assets/template/PcStore/${e}`)in S)return;S[e]=!0;const t=e.endsWith(".css"),a=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${a}`))return;const o=document.createElement("link");return o.rel=t?"stylesheet":"modulepreload",t||(o.as="script",o.crossOrigin=""),o.href=e,document.head.appendChild(o),t?new Promise(((e,t)=>{o.addEventListener("load",e),o.addEventListener("error",t)})):void 0}))).then((()=>e())):e()},v=[{path:"/",name:"index",meta:{title:"商城首页"},component:()=>L((()=>import("./index.374405f9.js")),["assets/index.374405f9.js","assets/index.106c83bf.css","assets/vendor.caf54732.js"])},{path:"/goods",name:"goods",meta:{title:"商品详情"},component:()=>L((()=>import("./index.50b47326.js")),["assets/index.50b47326.js","assets/index.b51976f4.css","assets/vendor.caf54732.js"])},{path:"/order",name:"order",meta:{title:"订单列表"},component:()=>L((()=>import("./index.129ddb31.js")),["assets/index.129ddb31.js","assets/index.40de6a32.css","assets/vendor.caf54732.js"])},{path:"/404",meta:{title:"页面不存在"},component:()=>L((()=>import("./404.a09c21f1.js")),["assets/404.a09c21f1.js","assets/vendor.caf54732.js"])},{path:"/:pathMatch(.*)",redirect:"/404"}],b=e({history:t(),routes:v});b.beforeEach(((e,t,a)=>{e.meta.title&&(document.title=e.meta.title),a()}));const x={name:"App",data:()=>({Data:{title:"云商城",logo:"./assets/img/logo.png",User:!1,NoticeBottom:""},Search:"",SearchList:[]}),mounted(){this.GetData()},methods:{HomeOpen(){window.location.href="./"},Open(e){this.$router.push({path:"goods",query:{gid:e}})},Router(e,t={}){this.$router.push({path:e,query:t})},querySearchAsync(e,t){t(this.SearchList)},handleSelect(e){console.log(e),this.Open(e.gid)},SelectEmpty(){this.$refs.autocomplete.activated=!1,this.SearchList=[],this.$refs.autocomplete.getData([])},GoodsSelect(){if(""===this.Search)return void this.SelectEmpty();let e=this;this.$ajax.post("main.php?act=GoodsList",{name:this.Search,page:-1,cid:-1}).then((function(t){if(t.code>=0)if(0===t.data.length)e.$notify({message:"没有搜索到相关商品"}),e.$refs.autocomplete.activated=!1,e.$refs.autocomplete.getData([]);else{e.SearchList=[];for(let a=0;a<t.data.length;a++)e.SearchList.push({value:t.data[a].name,gid:t.data[a].gid}),e.$refs.autocomplete.activated=!0,e.$refs.autocomplete.getData(e.SearchList);e.$notify({message:"共搜索到"+t.data.length+"个商品！",type:"success"})}}))},GetData(){let e=this;this.$ajax.post("main.php?act=inform").then((function(t){t.code>=0&&(e.$ConfData.Conf=t.data,e.Data=t.data)}))}}},$={style:{width:"100%",height:"auto",padding:"0",margin:"0"}},D={class:"Header"},E={class:"Title"},w=d("搜索"),C={style:{"margin-left":"0.8em"},href:"./user",target:"_blank"},O={class:"body"},P=["innerHTML"],R=n("br",null,null,-1);x.render=function(e,t,d,u,p,h){const m=a("el-image"),f=a("el-col"),g=a("el-button"),y=a("el-autocomplete"),_=a("el-row"),S=a("el-affix"),L=a("router-view"),v=a("el-footer"),b=a("el-backtop");return o(),s("div",$,[r(S,{offset:0,"z-index":999},{default:i((()=>[n("div",D,[r(_,{style:{margin:"auto",width:"1200px"}},{default:i((()=>[r(f,{onClick:t[0]||(t[0]=e=>h.HomeOpen()),span:7,style:{"text-align":"left",height:"68px",cursor:"pointer"}},{default:i((()=>[r(m,{class:"logo",src:p.Data.logo,alt:"logo",lazy:!0,fit:"scale-down"},null,8,["src"]),n("div",E,l(p.Data.title),1)])),_:1}),r(f,{span:10},{default:i((()=>[r(y,{style:{width:"90%"},"highlight-first-item":!0,onSelect:h.handleSelect,ref:"autocomplete",clearable:!0,placeholder:"可输入关键词搜索商品","fetch-suggestions":h.querySearchAsync,modelValue:p.Search,"onUpdate:modelValue":t[1]||(t[1]=e=>p.Search=e),onKeyup:c(h.GoodsSelect,["enter","native"]),onClear:h.SelectEmpty},{append:i((()=>[r(g,{onClick:h.GoodsSelect,class:"Se-btn",size:"small",round:""},{default:i((()=>[w])),_:1},8,["onClick"])])),_:1},8,["onSelect","fetch-suggestions","modelValue","onKeyup","onClear"])])),_:1}),r(f,{span:7,style:{"text-align":"right"}},{default:i((()=>[r(g,{onClick:t[2]||(t[2]=e=>h.Router("/order")),plain:"",icon:"el-icon-search",circle:""}),n("a",C,[r(g,{plain:"",icon:"el-icon-user",circle:""})])])),_:1})])),_:1})])])),_:1}),n("div",O,[r(L)]),r(v,{class:"footer"},{default:i((()=>[n("div",{innerHTML:p.Data.NoticeBottom},null,8,P),n("p",null,"版权所有："+l(p.Data.title),1),R])),_:1}),r(b)])};let j="./";function q(e){if(e&&(200===e.status||304===e.status||400===e.status)){let t=e.data;return t.data&&!t.data.code&&t.code<0&&h.error({title:"警告",message:t.msg}),t}return h.error({title:e.status,message:e.statusText}),{code:-1,msg:"网络异常"}}function T(e){return console.log("请求结束了,error"),h.error({title:"请求错误",message:e.message}),e}u.defaults.withCredentials=!0,u.defaults.crossDomain=!0,u.interceptors.request.use((e=>e),(e=>Promise.reject(e))),u.interceptors.response.use((e=>e),(e=>Promise.resolve(e.response)));var k={post:(e,t)=>(-1===e.indexOf("http://")&&-1===e.indexOf("https://")||(j=""),u({method:"post",baseURL:j+e,data:p.stringify(t),timeout:1e4,headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}}).then((e=>q(e))).catch((e=>(console.log(e),T(e))))),get:(e,t)=>(-1===e.indexOf("http://")&&-1===e.indexOf("https://")||(j=""),u({method:"get",baseURL:j+e,params:t,timeout:1e4,headers:{"X-Requested-With":"XMLHttpRequest"}}).then((e=>q(e))).catch((e=>T(e))))};const A=m(x);b.afterEach(((e,t,a)=>{window.scrollTo(0,0)})),A.config.globalProperties.$ConfData={Conf:[]},A.config.globalProperties.$ajax=k,A.config.globalProperties.$assets="./assets/template/PcStore",A.use(f,{locale:g}).use(b).use(y).use(_).mount("#app");
