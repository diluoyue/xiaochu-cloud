(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-shop-pay"],{"141b":function(t,e,i){"use strict";var a;i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return a}));var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"u-count-num",style:{fontSize:t.fontSize+"rpx",fontWeight:t.bold?"bold":"normal",color:t.color}},[t._v(t._s(t.displayValue))])},o=[]},"26d7":function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return a}));var a={uPopup:i("592c").default,uTag:i("52bf").default,uIcon:i("1143").default,uCountTo:i("73d6").default,uGap:i("edde").default,uCellGroup:i("016e").default,uCellItem:i("3a53").default,uDivider:i("28b1").default,uParse:i("aa19").default,uModal:i("e45c").default},n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("u-popup",{attrs:{closeable:!0},model:{value:t.CouponState,callback:function(e){t.CouponState=e},expression:"CouponState"}},[1==t.CouponType?i("v-uni-view",{staticClass:"Countitle",staticStyle:{"margin-bottom":"20rpx"}},[t._v("可用优惠券列表"),i("u-tag",{staticStyle:{"margin-left":"0.5rem","padding-left":"0.3rem"},attrs:{text:"不使用任何优惠券",shape:"circle",mode:"plain",type:"error"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.CouponUse(-1)}}})],1):i("v-uni-view",{staticClass:"Countitle",staticStyle:{"margin-bottom":"20rpx"}},[t._v("不可用优惠券列表 - 共"+t._s(t.CouponData.length)+"张")]),i("v-uni-scroll-view",{staticStyle:{height:"89vh"},attrs:{"scroll-y":!0}},t._l(t.CouponData,(function(e,a){return i("v-uni-view",{key:a,staticClass:"jingdong"},[1==e.type?i("v-uni-view",{staticClass:"left",staticStyle:{"background-color":"#ff2f2f"}},[i("v-uni-view",{staticClass:"sum"},[t._v("减"),i("v-uni-text",{staticClass:"num",staticStyle:{"font-size":"1.8rem"}},[t._v(t._s(e.derate))])],1),e.minimum>0?i("v-uni-view",{staticClass:"type"},[t._v("满"+t._s(e.minimum/1)+"元可用")]):i("v-uni-view",{staticClass:"type"},[t._v("无使用门槛")])],1):t._e(),2==e.type?i("v-uni-view",{staticClass:"left",staticStyle:{"background-color":"#ffaa00"}},[i("v-uni-view",{staticClass:"sum"},[t._v("减"),i("v-uni-text",{staticClass:"num",staticStyle:{"font-size":"1.8rem"}},[t._v(t._s(e.derate))])],1),i("v-uni-view",{staticClass:"type"},[t._v("无使用门槛")])],1):t._e(),3==e.type?i("v-uni-view",{staticClass:"left",staticStyle:{"background-color":"#55aaff"}},[i("v-uni-view",{staticClass:"sum"},[i("v-uni-text",{staticClass:"num"},[t._v(t._s(e.derate/10))]),t._v("折")],1),e.minimum>0?i("v-uni-view",{staticClass:"type"},[t._v("满"+t._s(e.minimum/1)+"元可用")]):i("v-uni-view",{staticClass:"type"},[t._v("无使用门槛")])],1):t._e(),i("v-uni-view",{staticClass:"right"},[i("v-uni-view",{staticClass:"top"},[i("v-uni-view",{staticClass:"title"},[1==e.type?i("v-uni-text",{staticClass:"tag",staticStyle:{"background-color":"#ff2f2f"}},[t._v(t._s(e.name))]):t._e(),2==e.type?i("v-uni-text",{staticClass:"tag",staticStyle:{"background-color":"#ffaa00"}},[t._v(t._s(e.name))]):t._e(),3==e.type?i("v-uni-text",{staticClass:"tag",staticStyle:{"background-color":"#55aaff"}},[t._v(t._s(e.name))]):t._e(),i("v-uni-text",[t._v(t._s(e.explain))]),1==t.CouponType?i("v-uni-view",{staticStyle:{"font-size":"0.6rem",color:"red"}},[t._v(t._s(e.ExpirationDate)+"后失效")]):i("v-uni-view",{staticStyle:{"font-size":"0.6rem",color:"red"}},[t._v(t._s(e.Time)+"后失效")])],1),i("v-uni-view",{staticClass:"bottom"},[i("v-uni-view",{staticStyle:{"font-size":"0.7rem",color:"#18B566"}},[t._v(t._s(2==t.CouponType?e.Money:"实际付款："+e.Price+"元"))]),a==t.CouponSelect&&1==t.CouponType?i("u-tag",{attrs:{text:"当前",shape:"circle",mode:"plain",type:"error"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.CouponUse(a)}}}):t._e(),a!=t.CouponSelect&&1==t.CouponType?i("u-tag",{attrs:{text:"使用",shape:"circle",mode:"plain",type:"success"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.CouponUse(a)}}}):t._e(),2==t.CouponType?i("u-tag",{attrs:{text:"不可选择",shape:"circle",mode:"plain",type:"error"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.CouponUse(a)}}}):t._e()],1)],1),i("v-uni-view",{staticClass:"tips"},[i("v-uni-view",{staticClass:"explain"},[i("u-icon",{staticClass:"transpond",attrs:{name:"pushpin",size:28}}),i("v-uni-text",[t._v(t._s(e.content))])],1)],1)],1)],1)})),1)],1),1==t.Data.type?i("v-uni-view",[i("v-uni-view",{staticClass:"TopPay"},[i("v-uni-view",{staticClass:"hade"},[i("u-icon",{staticStyle:{position:"absolute",right:"8vw","margin-top":"0.6rem","font-size":"1.1rem"},attrs:{name:"zhifubao"}}),t._v("付款金额")],1),i("v-uni-view",{staticClass:"Price"},[1==t.Data.method?[t._v("您需支付"),-1==t.CouponSelect?i("v-uni-view",{staticStyle:{display:"inline-block"}},[i("u-count-to",{staticStyle:{margin:"0 0.2rem"},attrs:{color:"#ff5500","start-val":0,decimals:t.NumRound(t.Data.price,2),"end-val":t.NumRound(t.Data.price)}})],1):i("v-uni-view",{staticStyle:{display:"inline-block"}},[i("u-count-to",{staticStyle:{margin:"0 0.2rem"},attrs:{color:"#ff5500","start-val":0,decimals:t.NumRound(t.CouponOn[t.CouponSelect].Price,2),"end-val":t.NumRound(t.CouponOn[t.CouponSelect].Price)}}),i("v-uni-text",{staticStyle:{color:"#626468","font-size":"0.9rem","text-decoration":"line-through"}},[t._v(t._s(t.NumRound(t.Data.price))+"元")])],1),t._v("人民币"),i("u-gap"),i("v-uni-view",[t._v("或"),i("u-count-to",{staticStyle:{"font-size":"1.1rem",margin:"0 0.2rem"},attrs:{color:"#00cf98","start-val":0,"end-val":t.Data.points}}),t._v(t._s(t.Data.currency))],1)]:t._e(),2==t.Data.method?[t._v("您需支付"),-1==t.CouponSelect?i("v-uni-view",{staticStyle:{display:"inline-block"}},[i("u-count-to",{staticStyle:{margin:"0 0.2rem"},attrs:{color:"#ff5500","start-val":0,decimals:t.NumRound(t.Data.price,2),"end-val":t.NumRound(t.Data.price)}})],1):i("v-uni-view",{staticStyle:{display:"inline-block"}},[i("u-count-to",{staticStyle:{margin:"0 0.2rem"},attrs:{color:"#ff5500","start-val":0,decimals:t.NumRound(t.CouponOn[t.CouponSelect].Price,2),"end-val":t.NumRound(t.CouponOn[t.CouponSelect].Price)}}),i("v-uni-text",{staticStyle:{color:"#626468","font-size":"0.9rem","text-decoration":"line-through"}},[t._v(t._s(t.NumRound(t.Data.price))+"元")])],1),t._v("人民币")]:t._e(),3==t.Data.method?[t._v("您需要支付"),i("u-count-to",{staticStyle:{"font-size":"1.2rem",margin:"0 0.2rem"},attrs:{color:"#00cf98","start-val":0,"end-val":t.Data.points}}),t._v(t._s(t.Data.currency))]:t._e()],2),t.Data.Seckill>=1?i("v-uni-view",{staticStyle:{width:"100%","text-align":"center",color:"#ff0000","margin-bottom":"10px"}},[t._v("当前商品价格已优惠"+t._s(t.Data.Seckill)+"%")]):t._e()],1),t.CouponOn.length>=1||t.CouponOff.length>=1?i("v-uni-view",{staticClass:"Pay",staticStyle:{"margin-bottom":"2rem",height:"auto","padding-bottom":"0.5rem"}},[i("v-uni-view",{staticClass:"hade"},[i("u-icon",{staticStyle:{position:"absolute",right:"8vw","margin-top":"0.6rem","font-size":"1.1rem"},attrs:{name:"coupon"}}),t._v("优惠折扣")],1),t.CouponOn.length>=1?i("u-cell-group",{attrs:{"hover-class":!0,border:!1}},[-1!=t.CouponSelect?i("u-cell-item",{attrs:{index:"1","title-style":{color:"#ff5500"},"border-bottom":!1,arrow:!0,title:"已选择："+t.CouponOn[t.CouponSelect].name,label:t.CouponOn[t.CouponSelect].explain,value:"选择","value-style":{color:"#ff0000"}},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.CouponSelectS.apply(void 0,arguments)}}}):i("u-cell-item",{attrs:{index:"1","title-style":{color:"#ff5500"},"border-bottom":!1,arrow:!0,title:"当前未使用优惠券",label:"共"+t.CouponOn.length+"张可用优惠券！",value:"选择","value-style":{color:"#ff0000"}},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.CouponSelectS.apply(void 0,arguments)}}}),t.CouponOff.length>=1?i("u-cell-item",{attrs:{index:"2","border-bottom":!1,arrow:!0,title:"您有未满足使用条件的优惠券",label:"共"+t.CouponOff.length+"张不可用优惠券,查看不可用的原因",value:"查看","value-style":{color:"#b8b8b8"}},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.CouponSelectS.apply(void 0,arguments)}}}):t._e()],1):i("u-cell-group",{attrs:{"hover-class":!0,border:!1}},[i("u-cell-item",{attrs:{index:"2","border-bottom":!1,arrow:!0,title:"当前未使用优惠券",label:"共"+t.CouponOff.length+"张不可用优惠券,查看不可用的原因",value:"查看","value-style":{color:"#b8b8b8"}},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.CouponSelectS.apply(void 0,arguments)}}})],1)],1):t._e(),i("v-uni-view",{staticClass:"Form"},[i("v-uni-view",{staticClass:"hade"},[i("u-icon",{staticStyle:{position:"absolute",right:"8vw","margin-top":"0.6rem","font-size":"1.1rem"},attrs:{name:"shopping-cart"}}),t._v("订单信息")],1),i("v-uni-view",{staticClass:"u-p-20"},[i("u-cell-group",{attrs:{"hover-class":!0,border:!1}},[i("u-cell-item",{attrs:{arrow:!1,title:"商品名称",value:t.Data.name,"value-style":t.style}}),i("u-cell-item",{attrs:{arrow:!1,title:"购买份数",value:t.Data.num+"份","value-style":t.style}}),i("u-cell-item",{attrs:{"border-bottom":!1,arrow:!1,title:"购买数量",value:t.Data.quantity+t.Data.units,"value-style":t.style}}),i("u-divider",{attrs:{halfWidth:"60",marginTop:"10",marginBottom:"10"}},[t._v("↓ 请确认您填写的订单信息 ↓")]),t._l(t.Data.input,(function(e,a){return i("u-cell-item",{key:a,attrs:{arrow:!1,title:e,"border-bottom":a+1!=t.Data.input.length,value:t.Data.data[a],"value-style":t.style}})}))],2)],1)],1)],1):i("v-uni-view",[i("v-uni-view",{staticClass:"TopPay"},[i("v-uni-view",{staticClass:"hade"},[i("u-icon",{staticStyle:{position:"absolute",right:"8vw","margin-top":"0.6rem","font-size":"1.1rem"},attrs:{name:"zhifubao"}}),t._v("付款金额")],1),i("v-uni-view",{staticClass:"Price"},[1==t.StateCart?[t._v("您需支付"),i("u-count-to",{staticStyle:{margin:"0 0.2rem"},attrs:{color:"#ff5500","start-val":0,decimals:t.NumRound(t.Price,2),"end-val":t.NumRound(t.Price)}}),t._v("人民币"),i("u-gap"),i("v-uni-view",[t._v("或"),i("u-count-to",{staticStyle:{"font-size":"1.1rem",margin:"0 0.2rem"},attrs:{color:"#00cf98","start-val":0,"end-val":t.Points}}),t._v(t._s(t.Data.currency))],1)]:t._e(),2==t.StateCart?[t._v("您需支付"),i("u-count-to",{staticStyle:{margin:"0 0.2rem"},attrs:{color:"#ff5500","start-val":0,decimals:t.NumRound(t.Price,2),"end-val":t.NumRound(t.Price)}}),t._v("人民币")]:t._e(),3==t.StateCart?[t._v("您需要支付"),i("u-count-to",{staticStyle:{"font-size":"1.2rem",margin:"0 0.2rem"},attrs:{color:"#00cf98","start-val":0,"end-val":t.Points}}),t._v(t._s(t.Data.currency))]:t._e()],2)],1),""!=t.notice?i("v-uni-view",{staticClass:"TopPay"},[i("v-uni-view",{staticClass:"hade"},[i("u-icon",{staticStyle:{position:"absolute",right:"8vw","margin-top":"0.6rem","font-size":"1.1rem"},attrs:{name:"bell"}}),t._v("提示信息")],1),i("v-uni-view",{staticStyle:{padding:"0 1rem 1rem 1rem","line-height":"1.1rem"}},[i("u-parse",{attrs:{html:t.notice}})],1)],1):t._e(),i("v-uni-view",{staticClass:"Form"},[i("v-uni-view",{staticClass:"hade"},[i("u-icon",{staticStyle:{position:"absolute",right:"8vw","margin-top":"0.6rem","font-size":"1.1rem"},attrs:{name:"shopping-cart"}}),t._v("订单信息")],1),i("v-uni-view",{staticClass:"u-p-20"},t._l(t.CartData,(function(e,a){return i("u-cell-group",{key:a,attrs:{"hover-class":!0,border:!1}},[i("u-cell-item",{attrs:{arrow:!1,title:e.GidData.name,label:e.GidData.price+"元 / "+e.GidData.points+t.Data.currency,"value-style":t.style,value:e.conts}})],1)})),1)],1)],1),i("v-uni-view",{staticClass:"Pay",staticStyle:{"margin-bottom":"2rem",height:"auto","padding-bottom":"0.5rem"}},[i("v-uni-view",{staticClass:"hade"},[i("u-icon",{staticStyle:{position:"absolute",right:"8vw","margin-top":"0.6rem","font-size":"1.1rem"},attrs:{name:"bag"}}),t._v("付款方式")],1),t.PayData.length>=1?i("v-uni-view",[i("u-cell-group",{attrs:{"hover-class":!0,border:!1}},[1==t.PayData[0].type?i("u-cell-item",{attrs:{index:"qqpay",icon:"qq-fill","value-style":{color:"#00aaff"},arrow:!0,title:"QQ",value:"选择"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.SubTips.apply(void 0,arguments)}}}):t._e(),1==t.PayData[1].type?i("u-cell-item",{attrs:{index:"wxpay","value-style":{color:"#19aa36"},icon:"weixin-fill",arrow:!0,title:"微信",value:"选择"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.SubTips.apply(void 0,arguments)}}}):t._e(),1==t.PayData[2].type?i("u-cell-item",{attrs:{index:"alipay","value-style":{color:"#5d6dd5"},icon:"zhifubao",arrow:!0,title:"支付宝",value:"选择"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.SubTips.apply(void 0,arguments)}}}):t._e(),1==t.PayData[3].type?i("u-cell-item",{attrs:{index:"money","value-style":{color:"#ff5500"},icon:"rmb-circle",label:t.PayData[3].surplus,arrow:!0,title:"余额",value:"选择"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.SubTips.apply(void 0,arguments)}}}):t._e(),1==t.PayData[4].type?i("u-cell-item",{attrs:{index:"currency",icon:"coupon","border-bottom":!1,arrow:!0,title:t.Data.currency,label:t.PayData[4].surplus,value:"选择","value-style":{color:"#83d56c"}},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.SubTips.apply(void 0,arguments)}}}):t._e()],1)],1):t._e()],1),i("u-modal",{attrs:{"confirm-text":"查看订单","cancel-text":"返回上一页",title:"订单创建提醒","show-cancel-button":!0},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.Open(1)},cancel:function(e){arguments[0]=e=t.$handleEvent(e),t.Open(2)}},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[i("v-uni-view",{staticClass:"slot-content",staticStyle:{padding:"1.2rem 2rem"}},[i("u-parse",{attrs:{html:t.content,selectable:!0,"show-with-animation":!0}})],1)],1),i("u-modal",{attrs:{"confirm-text":"确认","cancel-text":"取消",title:"支付确认","show-cancel-button":!0,content:t.content},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.Submit(t.OnPay,2)}},model:{value:t.show2,callback:function(e){t.show2=e},expression:"show2"}}),i("u-modal",{attrs:{"confirm-text":"确认","cancel-text":"取消",title:"支付确认","show-cancel-button":!0,content:"付款链接已经创建成功,点击确认开始付款!"},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.PayOpen.apply(void 0,arguments)}},model:{value:t.show4,callback:function(e){t.show4=e},expression:"show4"}}),i("u-modal",{attrs:{"z-index":"999999999999","confirm-text":"好的",title:"温馨提醒"},model:{value:t.show3,callback:function(e){t.show3=e},expression:"show3"}},[i("v-uni-view",{staticClass:"slot-content",staticStyle:{padding:"1.2rem 2rem"}},[i("u-parse",{attrs:{html:t.content,selectable:!0,"show-with-animation":!0}})],1)],1),i("u-divider",{attrs:{marginBottom:"60","half-width":"60"}},[t._v(t._s(t.State))])],1)},o=[]},"27e1":function(t,e,i){var a=i("44e7a");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("564f27f4",a,!0,{sourceMap:!1,shadowMode:!1})},"3c38":function(t,e,i){"use strict";var a;i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return a}));var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[t.nodes.length?t._e():t._t("default"),i("v-uni-view",{style:t.showAm+(t.selectable?";user-select:text;-webkit-user-select:text":""),attrs:{id:"_top"}},[i("div",{attrs:{id:"rtf"+t.uid}})])],2)},o=[]},"44e7a":function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,"@-webkit-keyframes _show-data-v-01dfbd2e{0%{opacity:0}100%{opacity:1}}@keyframes _show-data-v-01dfbd2e{0%{opacity:0}100%{opacity:1}}\n\n\n\n",""]),t.exports=e},"6f7e":function(t,e,i){"use strict";var a=i("ca09"),n=i.n(a);n.a},"6fe6":function(t,e,i){"use strict";var a=i("4ea4");i("c975"),i("d3b7"),i("ac1f"),i("25f0"),i("1276"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(i("b85c")),o={data:function(){return{Data:[],CartData:[],style:{color:"#3d3d3d","font-size":"0.7rem","max-width":"60vw","margin-left":"10vw"},PayData:[],State:"暂无需监控订单状态",UserState:2,show:!1,show2:!1,show3:!1,show4:!1,content:"测试数据",type:!0,OnPay:"wxpay",notice:"",StateCart:-1,Price:0,Points:0,payurl:"",pid:"-1",PaymentWayState:!0,CouponOn:[],CouponOff:[],CouponSelect:-1,CouponState:!1,CouponData:[],CouponType:1,DataGet:-1}},onLoad:function(t){this.DataGet=t,void 0==t.data?uni.navigateBack({delta:1}):(this.Data=JSON.parse(t.data),this.Data.name=t.name,this.PaymentWay(2))},methods:{initialize:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=this.DataGet;void 0==e.data?uni.navigateBack({delta:1}):1==this.Data.type?(this.CouponOn=uni.getStorageSync("CouponOn"),this.CouponOff=uni.getStorageSync("CouponOff"),this.Pay()):this.Cart(t)},NumRound:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;t-=0;var i=t.toFixed(8)-0;if(1===e)return i;if(0===i)return 0;var a=i.toString();return-1!==a.indexOf(".")?a.split(".")[1].length:0},CouponUse:function(t){if(1!=this.CouponType)return this.show3=!0,this.content="此优惠券未满足使用条件：<br>"+this.CouponOff[t].explain,!1;this.CouponSelect=t,this.CouponState=!1},CouponSelectS:function(t){if(0==this.CouponOn.length&&0==this.CouponOff.length)return!1;this.CouponType=t;var e=this;if(this.CouponData=1==t?this.CouponOn:this.CouponOff,0==this.CouponData.length)return e.show3=!0,e.content=1==t?"当前无可选择优惠券":"当前无不可选优惠券",!1;e.CouponState=!0},PayOpen:function(){""!=this.payurl?(this.Monitoring(this.pid,1),this.State="开始监控支付订单",this.Opens(this.payurl)):this.$u.toast("付款链接获取失败！")},StateCartPay:function(){var t=1;1==this.PayData[4].type?t=1==this.PayData[3].type||1==this.PayData[2].type||1==this.PayData[1].type||1==this.PayData[0].type?1:3:1==this.PayData[3].type&&(t=2),this.StateCart=t},PriceOs:function(){var t,e=0,i=0,a=(0,n.default)(this.CartData);try{for(a.s();!(t=a.n()).done;){var o=t.value;e+=o.GidData.price,i+=o.GidData.points}}catch(r){a.e(r)}finally{a.f()}this.Price=e,this.Points=i},Open:function(t){this.type=!1,this.PaymentWayState=!1,uni.removeStorageSync("CouponOn"),uni.removeStorageSync("CouponOff"),1==t?this.$u.route({type:"tab",url:"pages/order/order"}):uni.navigateBack({delta:1})},Pay:function(){2!==this.Data.type&&(uni.setNavigationBarTitle({title:"确认订单 - "+this.Data.name}),this.CouponOn.length>=1?this.CouponSelect=0:this.CouponSelect=-1,this.PaymentWay())},Cart:function(){if(1!==this.Data.type){var t=this;this.Data.type=2,this.$u.post("?act=CartList",{data:this.Data}).then((function(e){e.code>=0&&(0==e.data.length||void 0==e.data.length?uni.navigateBack({delta:1}):(uni.setNavigationBarTitle({title:"结算购物车 - "+e.data.length+"个商品"}),t.CartData=e.data,t.StateCartPay(),t.PriceOs(),t.PaymentWay())),t.$forceUpdate()}))}},PaymentWay:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=this;this.$u.post("?act=PaymentWay",{gid:i.Data.gid,type:1===i.Data.type?1:2}).then((function(a){a.code>=0&&(i.PayData=a.data,i.UserState=a.state,2==t.Data.type&&(i.notice=a.notice,i.Data.currency=a.currency),2==e&&i.initialize(2),1==i.PaymentWayState&&2==e&&setTimeout((function(){i.PaymentWay()}),1e4)),uni.stopPullDownRefresh()}))},SubTips:function(t){if(0!=this.PayData.length)switch(t){case"qqpay":if(2==this.PayData[0].type)return;return this.OnPay=t,void this.Submit(t,2);case"wxpay":if(2==this.PayData[1].type)return;return void this.Submit(t,2);case"alipay":if(2==this.PayData[2].type)return;return void this.Submit(t,2);case"money":case"currency":return 2==this.UserState?void this.$u.route({type:"reLaunch",url:"pages/user/user"}):(this.content="是否要使用"+("money"==t?"余额":this.Data.currency)+"购买商品，确认后会扣除对应"+("money"==t?"余额":this.Data.currency)+"？",this.OnPay=t,void(this.show2=!0))}},Submit:function(t){if(0!=this.PayData.length)switch(t){case"qqpay":if(2==this.PayData[0].type)return;this.SubmitAjax(t,1);break;case"wxpay":if(2==this.PayData[1].type)return;this.SubmitAjax(t,1);break;case"alipay":if(2==this.PayData[2].type)return;this.SubmitAjax(t,1);break;case"money":case"currency":if(2==this.UserState)return void this.$u.route({type:"reLaunch",url:"pages/user/user"});this.SubmitAjax(t,"money"==t?2:3);break}},Opens:function(t){window.open(t,"_blank")},CartPay:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"wxpay",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=this,a={};for(var n in this.Data)a[n]=this.Data[n];a.type=e,a.mode=t,this.$u.get("?act=CartPay",a).then((function(t){if(1==t.code)i.State="订单创建完成,无需监控",i.show=!0,i.content=t.msg,i.queue();else if(2==t.code)i.payurl=t.url,i.pid=t.pid,i.show4=!0;else if(-3==t.code)i.queue(),i.Monitoring(t.pid,2),i.State="开始监控商品订单";else{if(void 0==t.msg||void 0==t.code||""==t.msg||""==t.code)return i.State="订单创建完成,无需监控",i.show=!0,void(i.content="点击确定查看订单");-4==t.code?i.show=!0:i.show3=!0,i.content=t.msg,i.State="支付未完成"}}))},SubmitAjax:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"wxpay",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=this;if(2!=this.Data.type){var a={};for(var n in this.Data.data)a[n]=this.Data.data[n];a.gid=this.Data.gid,a.num=this.Data.num,a.type=e,a.mode=t;var o=-1;-1!=i.CouponSelect&&(o=i.CouponOn[i.CouponSelect].id),a.CouponSelect=o,uni.showLoading({title:"loading",mask:!0}),this.$u.post("?act=Pay",a).then((function(t){if(uni.hideLoading(),1==t.code)i.State="订单创建完成,无需监控",i.show=!0,i.content=t.msg,i.queue();else if(2==t.code)i.payurl=t.url,i.pid=t.pid,i.show4=!0;else if(-3==t.code)i.queue(),i.Monitoring(t.pid,2),i.State="开始监控商品订单";else{if(void 0==t.msg||void 0==t.code||""==t.msg||""==t.code)return i.State="订单创建完成,无需监控",i.show=!0,void(i.content="点击确定查看订单");i.show3=!0,i.content=t.msg,i.State="支付未完成"}}))}else this.CartPay(t,e)},Monitoring:function(t,e){if(0!=this.type){var i=this;this.$u.get("?act=OrderState",{pid:t,type:e}).then((function(a){a.code>=0?(i.State="订单创建完成,无需监控",i.show=!0,i.content=a.msg,i.type=!1):setTimeout((function(){i.Monitoring(t,e),i.queue()}),1e3)}))}},queue:function(){this.$u.get("?act=SubmitOrder")}},onPullDownRefresh:function(){this.type=!1,this.State="暂无需监控订单状态",this.initialize()},onUnload:function(){this.type=!1,this.PaymentWayState=!1,uni.removeStorageSync("CouponOn"),uni.removeStorageSync("CouponOff")}};e.default=o},"71b9":function(t,e,i){"use strict";i.r(e);var a=i("26d7"),n=i("82fc");for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);i("6f7e"),i("abdf");var r,s=i("f0c5"),l=Object(s["a"])(n["default"],a["b"],a["c"],!1,null,"74c56e44",null,!1,a["a"],r);e["default"]=l.exports},"73d6":function(t,e,i){"use strict";i.r(e);var a=i("141b"),n=i("d5c1");for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);i("8b23");var r,s=i("f0c5"),l=Object(s["a"])(n["default"],a["b"],a["c"],!1,null,"ffbbf920",null,!1,a["a"],r);e["default"]=l.exports},"82fc":function(t,e,i){"use strict";i.r(e);var a=i("6fe6"),n=i.n(a);for(var o in a)"default"!==o&&function(t){i.d(e,t,(function(){return a[t]}))}(o);e["default"]=n.a},"847c":function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,"/* uni.scss */.TemCut[data-v-ffbbf920]{bottom:%?300?%;right:%?40?%;border-radius:5493px;background-color:#e1e1e1;z-index:999999;opacity:.8;width:%?80?%;height:%?80?%;position:fixed;z-index:9;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;background-color:#e1e1e1;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-transition:opacity .4s}.grid-text[data-v-ffbbf920]{font-size:%?20?%;margin-top:%?8?%;color:#909399}.demo-warter[data-v-ffbbf920]{border-radius:8px;margin:5px;background-color:#fff;padding:8px;position:relative;max-width:47vw}.u-close[data-v-ffbbf920]{position:absolute;top:%?32?%;right:%?32?%}.demo-image[data-v-ffbbf920]{width:100%;border-radius:4px}.demo-title[data-v-ffbbf920]{font-size:%?30?%;margin-top:5px;color:#303133}.demo-tag[data-v-ffbbf920]{display:flex;margin-top:5px}.demo-tag-owner[data-v-ffbbf920]{background-color:#fa3534;color:#fff;display:flex;align-items:center;padding:%?4?% %?14?%;border-radius:%?50?%;font-size:%?20?%;line-height:1}.demo-tag-text[data-v-ffbbf920]{border:1px solid #2979ff;color:#2979ff;margin-left:10px;border-radius:%?50?%;line-height:1;padding:%?4?% %?14?%;display:flex;align-items:center;border-radius:%?50?%;font-size:%?20?%}.HistoryBtn[data-v-ffbbf920]{background-color:#f1f1f1;border:none!important;font-size:.5rem;margin:.2rem}.demo-price[data-v-ffbbf920]{font-size:%?30?%;color:#fa3534;margin-top:5px}.demo-shop[data-v-ffbbf920]{font-size:%?22?%;color:#909399;margin-top:5px}.uni-scroll-view-content[data-v-ffbbf920]{height:auto!important}.jingdong[data-v-ffbbf920]{width:96%;margin-left:2%;height:auto;background-color:#fff;display:flex;box-shadow:3px 3px 16px #eee;margin-bottom:1rem}.jingdong .left[data-v-ffbbf920]{padding:0 %?30?%;background-color:#5f94e0;text-align:center;font-size:%?28?%;color:#fff}.jingdong .left .sum[data-v-ffbbf920]{margin-top:%?50?%;font-weight:700;font-size:%?32?%}.jingdong .left .sum .num[data-v-ffbbf920]{font-size:%?80?%}.jingdong .left .type[data-v-ffbbf920]{margin-bottom:%?50?%;font-size:%?24?%}.jingdong .right[data-v-ffbbf920]{padding:%?20?% %?20?% 0;font-size:%?28?%}.jingdong .right .top[data-v-ffbbf920]{border-bottom:%?2?% dashed #e4e7ed}.jingdong .right .top .title[data-v-ffbbf920]{margin-right:%?60?%;line-height:%?40?%}.jingdong .right .top .title .tag[data-v-ffbbf920]{padding:%?4?% %?20?%;background-color:#499ac9;border-radius:%?20?%;color:#fff;font-weight:700;font-size:%?24?%;margin-right:%?10?%}.jingdong .right .top .bottom[data-v-ffbbf920]{display:flex;margin-top:%?20?%;align-items:center;justify-content:space-between;margin-bottom:%?10?%}.jingdong .right .top .bottom .date[data-v-ffbbf920]{font-size:%?20?%;flex:1}.jingdong .right .tips[data-v-ffbbf920]{width:100%;line-height:%?50?%;display:flex;align-items:center;justify-content:space-between;font-size:%?24?%}.jingdong .right .tips .transpond[data-v-ffbbf920]{margin-right:%?10?%}.jingdong .right .tips .explain[data-v-ffbbf920]{display:flex;align-items:center}.jingdong .right .tips .particulars[data-v-ffbbf920]{width:%?30?%;height:%?30?%;box-sizing:border-box;padding-top:%?8?%;border-radius:50%;background-color:#c8c9cc;text-align:center}.Countitle[data-v-ffbbf920]{width:100vw;height:3rem;text-align:left;line-height:3rem;box-shadow:3px 3px 16px #ccc;font-weight:700;font-size:16px;text-indent:.5rem;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.u-count-num[data-v-ffbbf920]{display:inline-flex;text-align:center}",""]),t.exports=e},"8b23":function(t,e,i){"use strict";var a=i("9bc0"),n=i.n(a);n.a},9102:function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,'@charset "UTF-8";\n/* uni.scss */.TemCut[data-v-74c56e44]{bottom:%?300?%;right:%?40?%;border-radius:5493px;background-color:#e1e1e1;z-index:999999;opacity:.8;width:%?80?%;height:%?80?%;position:fixed;z-index:9;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;background-color:#e1e1e1;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-transition:opacity .4s}.grid-text[data-v-74c56e44]{font-size:%?20?%;margin-top:%?8?%;color:#909399}.demo-warter[data-v-74c56e44]{border-radius:8px;margin:5px;background-color:#fff;padding:8px;position:relative;max-width:47vw}.u-close[data-v-74c56e44]{position:absolute;top:%?32?%;right:%?32?%}.demo-image[data-v-74c56e44]{width:100%;border-radius:4px}.demo-title[data-v-74c56e44]{font-size:%?30?%;margin-top:5px;color:#303133}.demo-tag[data-v-74c56e44]{display:flex;margin-top:5px}.demo-tag-owner[data-v-74c56e44]{background-color:#fa3534;color:#fff;display:flex;align-items:center;padding:%?4?% %?14?%;border-radius:%?50?%;font-size:%?20?%;line-height:1}.demo-tag-text[data-v-74c56e44]{border:1px solid #2979ff;color:#2979ff;margin-left:10px;border-radius:%?50?%;line-height:1;padding:%?4?% %?14?%;display:flex;align-items:center;border-radius:%?50?%;font-size:%?20?%}.HistoryBtn[data-v-74c56e44]{background-color:#f1f1f1;border:none!important;font-size:.5rem;margin:.2rem}.demo-price[data-v-74c56e44]{font-size:%?30?%;color:#fa3534;margin-top:5px}.demo-shop[data-v-74c56e44]{font-size:%?22?%;color:#909399;margin-top:5px}.uni-scroll-view-content[data-v-74c56e44]{height:auto!important}.jingdong[data-v-74c56e44]{width:96%;margin-left:2%;height:auto;background-color:#fff;display:flex;box-shadow:3px 3px 16px #eee;margin-bottom:1rem}.jingdong .left[data-v-74c56e44]{padding:0 %?30?%;background-color:#5f94e0;text-align:center;font-size:%?28?%;color:#fff}.jingdong .left .sum[data-v-74c56e44]{margin-top:%?50?%;font-weight:700;font-size:%?32?%}.jingdong .left .sum .num[data-v-74c56e44]{font-size:%?80?%}.jingdong .left .type[data-v-74c56e44]{margin-bottom:%?50?%;font-size:%?24?%}.jingdong .right[data-v-74c56e44]{padding:%?20?% %?20?% 0;font-size:%?28?%}.jingdong .right .top[data-v-74c56e44]{border-bottom:%?2?% dashed #e4e7ed}.jingdong .right .top .title[data-v-74c56e44]{margin-right:%?60?%;line-height:%?40?%}.jingdong .right .top .title .tag[data-v-74c56e44]{padding:%?4?% %?20?%;background-color:#499ac9;border-radius:%?20?%;color:#fff;font-weight:700;font-size:%?24?%;margin-right:%?10?%}.jingdong .right .top .bottom[data-v-74c56e44]{display:flex;margin-top:%?20?%;align-items:center;justify-content:space-between;margin-bottom:%?10?%}.jingdong .right .top .bottom .date[data-v-74c56e44]{font-size:%?20?%;flex:1}.jingdong .right .tips[data-v-74c56e44]{width:100%;line-height:%?50?%;display:flex;align-items:center;justify-content:space-between;font-size:%?24?%}.jingdong .right .tips .transpond[data-v-74c56e44]{margin-right:%?10?%}.jingdong .right .tips .explain[data-v-74c56e44]{display:flex;align-items:center}.jingdong .right .tips .particulars[data-v-74c56e44]{width:%?30?%;height:%?30?%;box-sizing:border-box;padding-top:%?8?%;border-radius:50%;background-color:#c8c9cc;text-align:center}.Countitle[data-v-74c56e44]{width:100vw;height:3rem;text-align:left;line-height:3rem;box-shadow:3px 3px 16px #ccc;font-weight:700;font-size:16px;text-indent:.5rem;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.TopPay[data-v-74c56e44]{opacity:.8;font-family:黑体;width:90%;margin:2rem auto 2rem;box-shadow:3px 3px 16px #f4f4ed;border-bottom:2px #695cfc solid;border-radius:.5rem}.TopPay .Price[data-v-74c56e44]{padding:1rem;text-align:center;color:#000;font-size:.95rem}.Form[data-v-74c56e44],\n.Pay[data-v-74c56e44]{opacity:.8;border-bottom:2px #695cfc solid;width:90%;margin:auto;border-radius:.5rem;box-shadow:3px 3px 16px #f4f4ed}.Pay[data-v-74c56e44]{margin-top:2rem;height:10rem;margin-bottom:2rem}.hade[data-v-74c56e44]{background-color:#fff;color:#695cfc;height:2.3rem;line-height:2.3rem;text-indent:.5rem;box-shadow:0 -8px 16px #ebebeb;border-radius:.5rem;font-size:.85rem}.jingdong[data-v-74c56e44]{width:96%;margin-left:2%;height:auto;background-color:#fff;display:flex;box-shadow:3px 3px 16px #eee;margin-bottom:1rem}.jingdong .left[data-v-74c56e44]{padding:0 %?30?%;background-color:#5f94e0;text-align:center;font-size:%?28?%;color:#fff}.jingdong .left .sum[data-v-74c56e44]{margin-top:%?50?%;font-weight:700;font-size:%?32?%}.jingdong .left .sum .num[data-v-74c56e44]{font-size:%?80?%}.jingdong .left .type[data-v-74c56e44]{margin-bottom:%?50?%;font-size:%?24?%}.jingdong .right[data-v-74c56e44]{padding:%?20?% %?20?% 0;font-size:%?28?%}.jingdong .right .top[data-v-74c56e44]{border-bottom:%?2?% dashed #e4e7ed}.jingdong .right .top .title[data-v-74c56e44]{margin-right:%?60?%;line-height:%?40?%}.jingdong .right .top .title .tag[data-v-74c56e44]{padding:%?4?% %?20?%;background-color:#499ac9;border-radius:%?20?%;color:#fff;font-weight:700;font-size:%?24?%;margin-right:%?10?%}.jingdong .right .top .bottom[data-v-74c56e44]{display:flex;margin-top:%?20?%;align-items:center;justify-content:space-between;margin-bottom:%?10?%}.jingdong .right .top .bottom .date[data-v-74c56e44]{font-size:%?20?%;flex:1}.jingdong .right .tips[data-v-74c56e44]{width:100%;line-height:%?50?%;display:flex;align-items:center;justify-content:space-between;font-size:%?24?%}.jingdong .right .tips .transpond[data-v-74c56e44]{margin-right:%?10?%}.jingdong .right .tips .explain[data-v-74c56e44]{display:flex;align-items:center}.jingdong .right .tips .particulars[data-v-74c56e44]{width:%?30?%;height:%?30?%;box-sizing:border-box;padding-top:%?8?%;border-radius:50%;background-color:#c8c9cc;text-align:center}.Countitle[data-v-74c56e44]{width:100vw;height:3rem;text-align:left;line-height:3rem;box-shadow:3px 3px 16px #ccc;font-weight:700;font-size:16px;text-indent:.5rem;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}',""]),t.exports=e},"91d1":function(t,e,i){"use strict";i.r(e);var a=i("ebf4"),n=i.n(a);for(var o in a)"default"!==o&&function(t){i.d(e,t,(function(){return a[t]}))}(o);e["default"]=n.a},"98fa":function(t,e,i){"use strict";var a=i("27e1"),n=i.n(a);n.a},"9bc0":function(t,e,i){var a=i("847c");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("32574b24",a,!0,{sourceMap:!1,shadowMode:!1})},aa19:function(t,e,i){"use strict";i.r(e);var a=i("3c38"),n=i("91d1");for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);i("98fa");var r,s=i("f0c5"),l=Object(s["a"])(n["default"],a["b"],a["c"],!1,null,"01dfbd2e",null,!1,a["a"],r);e["default"]=l.exports},abdf:function(t,e,i){"use strict";var a=i("b8d5"),n=i.n(a);n.a},b85c:function(t,e,i){"use strict";i("a4d3"),i("e01a"),i("d28b"),i("d3b7"),i("3ca3"),i("ddb0"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var a=n(i("06c5"));function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e){var i;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=(0,a.default)(t))||e&&t&&"number"===typeof t.length){i&&(t=i);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,l=!1;return{s:function(){i=t[Symbol.iterator]()},n:function(){var t=i.next();return s=t.done,t},e:function(t){l=!0,r=t},f:function(){try{s||null==i["return"]||i["return"]()}finally{if(l)throw r}}}}},b8d5:function(t,e,i){var a=i("9102");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("26400a80",a,!0,{sourceMap:!1,shadowMode:!1})},be17:function(t,e,i){"use strict";i("a9e3"),i("acd8"),i("ac1f"),i("5319"),i("1276"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={name:"u-count-to",props:{startVal:{type:[Number,String],default:0},endVal:{type:[Number,String],default:0,required:!0},duration:{type:[Number,String],default:2e3},autoplay:{type:Boolean,default:!0},decimals:{type:[Number,String],default:0},useEasing:{type:Boolean,default:!0},decimal:{type:[Number,String],default:"."},color:{type:String,default:"#303133"},fontSize:{type:[Number,String],default:50},bold:{type:Boolean,default:!1},separator:{type:String,default:""}},data:function(){return{localStartVal:this.startVal,displayValue:this.formatNumber(this.startVal),printVal:null,paused:!1,localDuration:Number(this.duration),startTime:null,timestamp:null,remaining:null,rAF:null,lastTime:0}},computed:{countDown:function(){return this.startVal>this.endVal}},watch:{startVal:function(){this.autoplay&&this.start()},endVal:function(){this.autoplay&&this.start()}},mounted:function(){this.autoplay&&this.start()},methods:{easingFn:function(t,e,i,a){return i*(1-Math.pow(2,-10*t/a))*1024/1023+e},requestAnimationFrame:function(t){var e=(new Date).getTime(),i=Math.max(0,16-(e-this.lastTime)),a=setTimeout((function(){t(e+i)}),i);return this.lastTime=e+i,a},cancelAnimationFrame:function(t){clearTimeout(t)},start:function(){this.localStartVal=this.startVal,this.startTime=null,this.localDuration=this.duration,this.paused=!1,this.rAF=this.requestAnimationFrame(this.count)},reStart:function(){this.paused?(this.resume(),this.paused=!1):(this.stop(),this.paused=!0)},stop:function(){this.cancelAnimationFrame(this.rAF)},resume:function(){this.startTime=null,this.localDuration=this.remaining,this.localStartVal=this.printVal,this.requestAnimationFrame(this.count)},reset:function(){this.startTime=null,this.cancelAnimationFrame(this.rAF),this.displayValue=this.formatNumber(this.startVal)},count:function(t){this.startTime||(this.startTime=t),this.timestamp=t;var e=t-this.startTime;this.remaining=this.localDuration-e,this.useEasing?this.countDown?this.printVal=this.localStartVal-this.easingFn(e,0,this.localStartVal-this.endVal,this.localDuration):this.printVal=this.easingFn(e,this.localStartVal,this.endVal-this.localStartVal,this.localDuration):this.countDown?this.printVal=this.localStartVal-(this.localStartVal-this.endVal)*(e/this.localDuration):this.printVal=this.localStartVal+(this.endVal-this.localStartVal)*(e/this.localDuration),this.countDown?this.printVal=this.printVal<this.endVal?this.endVal:this.printVal:this.printVal=this.printVal>this.endVal?this.endVal:this.printVal,this.displayValue=this.formatNumber(this.printVal),e<this.localDuration?this.rAF=this.requestAnimationFrame(this.count):this.$emit("end")},isNumber:function(t){return!isNaN(parseFloat(t))},formatNumber:function(t){t=Number(t),t=t.toFixed(Number(this.decimals)),t+="";var e=t.split("."),i=e[0],a=e.length>1?this.decimal+e[1]:"",n=/(\d+)(\d{3})/;if(this.separator&&!this.isNumber(this.separator))while(n.test(i))i=i.replace(n,"$1"+this.separator+"$2");return i+a},destroyed:function(){this.cancelAnimationFrame(this.rAF)}}};e.default=a},ca09:function(t,e,i){var a=i("e78b");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("517037ae",a,!0,{sourceMap:!1,shadowMode:!1})},d5c1:function(t,e,i){"use strict";i.r(e);var a=i("be17"),n=i.n(a);for(var o in a)"default"!==o&&function(t){i.d(e,t,(function(){return a[t]}))}(o);e["default"]=n.a},dd8c:function(t,e,i){i("ac1f"),i("1276");var a={errorImg:null,filter:null,highlight:null,onText:null,entities:{quot:'"',apos:"'",semi:";",nbsp:" ",ensp:" ",emsp:" ",ndash:"–",mdash:"—",middot:"·",lsquo:"‘",rsquo:"’",ldquo:"“",rdquo:"”",bull:"•",hellip:"…"},blankChar:n(" , ,\t,\r,\n,\f"),boolAttrs:n("allowfullscreen,autoplay,autostart,controls,ignore,loop,muted"),blockTags:n("address,article,aside,body,caption,center,cite,footer,header,html,nav,pre,section"),ignoreTags:n("area,base,canvas,frame,iframe,input,link,map,meta,param,script,source,style,svg,textarea,title,track,wbr"),richOnlyTags:n("a,colgroup,fieldset,legend"),selfClosingTags:n("area,base,br,col,circle,ellipse,embed,frame,hr,img,input,line,link,meta,param,path,polygon,rect,source,track,use,wbr"),trustTags:n("a,abbr,ad,audio,b,blockquote,br,code,col,colgroup,dd,del,dl,dt,div,em,fieldset,h1,h2,h3,h4,h5,h6,hr,i,img,ins,label,legend,li,ol,p,q,source,span,strong,sub,sup,table,tbody,td,tfoot,th,thead,tr,title,ul,video"),userAgentStyles:{address:"font-style:italic",big:"display:inline;font-size:1.2em",blockquote:"background-color:#f6f6f6;border-left:3px solid #dbdbdb;color:#6c6c6c;padding:5px 0 5px 10px",caption:"display:table-caption;text-align:center",center:"text-align:center",cite:"font-style:italic",dd:"margin-left:40px",mark:"background-color:yellow",pre:"font-family:monospace;white-space:pre;overflow:scroll",s:"text-decoration:line-through",small:"display:inline;font-size:0.8em",u:"text-decoration:underline"}};function n(t){for(var e=Object.create(null),i=t.split(","),a=i.length;a--;)e[i[a]]=!0;return e}t.exports=a},e78b:function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,"",""]),t.exports=e},ebf4:function(t,e,i){"use strict";var a=i("4ea4");i("99af"),i("caad"),i("c975"),i("acd8"),i("e25e"),i("ac1f"),i("2532"),i("466d"),i("5319"),i("841c"),i("1276"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,o=a(i("b85c")),r=uni.getSystemInfoSync(),s=r.windowWidth,l=(r.platform,i("dd8c")),c={name:"parser",data:function(){return{uid:this._uid,showAm:"",nodes:[]}},props:{html:String,autopause:{type:Boolean,default:!0},autoscroll:Boolean,autosetTitle:{type:Boolean,default:!0},domain:String,lazyLoad:Boolean,selectable:Boolean,tagStyle:Object,showWithAnimation:Boolean,useAnchor:Boolean},watch:{html:function(t){this.setContent(t)}},created:function(){this.imgList=[],this.imgList.each=function(t){for(var e=0,i=this.length;e<i;e++)this.setItem(e,t(this[e],e,this))},this.imgList.setItem=function(t,e){if(void 0!=t&&e){if(0==e.indexOf("http")&&this.includes(e)){for(var i,a=e.split("://")[0],n=a.length;i=e[n];n++){if("/"==i&&"/"!=e[n-1]&&"/"!=e[n+1])break;a+=Math.random()>.5?i.toUpperCase():i}return a+=e.substr(n),this[t]=a}if(this[t]=e,e.includes("data:image")){var o=e.match(/data:image\/(\S+?);(\S+?),(.+)/);if(!o)return}}}},mounted:function(){var t=this;this.document=document.getElementById("rtf"+this._uid),n&&(this.search=function(e){return n(t,e)}),this.html&&this.setContent(this.html)},beforeDestroy:function(){this._observer&&this._observer.disconnect(),this.imgList.each((function(t){})),clearInterval(this._timer)},methods:{setContent:function(t,e){var i=this;if(t){var a=document.createElement("div");e?this.rtf?this.rtf.appendChild(a):this.rtf=a:(this.rtf&&this.rtf.parentNode.removeChild(this.rtf),this.rtf=a),a.innerHTML=this._handleHtml(t,e);for(var n,r=this.rtf.getElementsByTagName("style"),c=0;n=r[c++];)n.innerHTML=n.innerHTML.replace(/body/g,"#rtf"+this._uid),n.setAttribute("scoped","true");!this._observer&&this.lazyLoad&&IntersectionObserver&&(this._observer=new IntersectionObserver((function(t){for(var e,a=0;e=t[a++];)e.isIntersecting&&(e.target.src=e.target.getAttribute("data-src"),e.target.removeAttribute("data-src"),i._observer.unobserve(e.target))}),{rootMargin:"500px 0px 500px 0px"}));var u=this,d=this.rtf.getElementsByTagName("title");d.length&&this.autosetTitle&&uni.setNavigationBarTitle({title:d[0].innerText});var f=function(t){var e=t.getAttribute("src");i.domain&&e&&("/"==e[0]?"/"==e[1]?t.src=(i.domain.includes("://")?i.domain.split("://")[0]:"")+":"+e:t.src=i.domain+e:e.includes("://")||0==e.indexOf("data:")||(t.src=i.domain+"/"+e))};this.imgList.length=0;for(var h,p=this.rtf.getElementsByTagName("img"),m=0,g=0;h=p[m];m++)parseInt(h.style.width||h.getAttribute("width"))>s&&(h.style.height="auto"),f(h),h.hasAttribute("ignore")||"A"==h.parentElement.nodeName||(h.i=g++,u.imgList.push(h.getAttribute("original-src")||h.src||h.getAttribute("data-src")),h.onclick=function(t){t.stopPropagation();var e=!0;this.ignore=function(){return e=!1},u.$emit("imgtap",this),e&&uni.previewImage({current:this.i,urls:u.imgList})}),h.onerror=function(){l.errorImg&&(u.imgList[this.i]=this.src=l.errorImg),u.$emit("error",{source:"img",target:this})},u.lazyLoad&&this._observer&&h.src&&0!=h.i&&(h.setAttribute("data-src",h.src),h.removeAttribute("src"),this._observer.observe(h));var v,b=this.rtf.getElementsByTagName("a"),y=(0,o.default)(b);try{for(y.s();!(v=y.n()).done;){var w=v.value;w.onclick=function(t){t.stopPropagation();var e=!0,i=this.getAttribute("href");if(u.$emit("linkpress",{href:i,ignore:function(){return e=!1}}),e&&i)if("#"==i[0])u.useAnchor&&u.navigateTo({id:i.substr(1)});else{if(0==i.indexOf("http")||0==i.indexOf("//"))return!0;uni.navigateTo({url:i})}return!1}}}catch(N){y.e(N)}finally{y.f()}var x=this.rtf.getElementsByTagName("video");u.videoContexts=x;for(var S,C=0;S=x[C++];)f(S),S.style.maxWidth="100%",S.onerror=function(){u.$emit("error",{source:"video",target:this})},S.onplay=function(){if(u.autopause)for(var t,e=0;t=u.videoContexts[e++];)t!=this&&t.pause()};var _,k,D=this.rtf.getElementsByTagName("audio"),z=(0,o.default)(D);try{for(z.s();!(_=z.n()).done;){var P=_.value;f(P),P.onerror=function(){u.$emit("error",{source:"audio",target:this})}}}catch(N){z.e(N)}finally{z.f()}if(this.autoscroll){var T,j=this.rtf.getElementsByTagName("table"),O=(0,o.default)(j);try{for(O.s();!(T=O.n()).done;){var V=T.value,A=document.createElement("div");A.style.overflow="scroll",V.parentNode.replaceChild(A,V),A.appendChild(V)}}catch(N){O.e(N)}finally{O.f()}}e||this.document.appendChild(this.rtf),this.$nextTick((function(){i.nodes=[1],i.$emit("load")})),setTimeout((function(){return i.showAm=""}),500),clearInterval(this._timer),this._timer=setInterval((function(){i.rect=i.rtf.getBoundingClientRect(),i.rect.height==k&&(i.$emit("ready",i.rect),clearInterval(i._timer)),k=i.rect.height}),350),this.showWithAnimation&&!e&&(this.showAm="animation:_show .5s")}else this.rtf&&!e&&this.rtf.parentNode.removeChild(this.rtf)},getText:function(){arguments.length>0&&void 0!==arguments[0]||this.nodes;var t="";return t=this.rtf.innerText,t},in:function(t){t.page&&t.selector&&t.scrollTop&&(this._in=t)},navigateTo:function(t){var e=this;if(!this.useAnchor)return t.fail&&t.fail("Anchor is disabled");var i=" ",a=uni.createSelectorQuery().in(this._in?this._in.page:this).select((this._in?this._in.selector:"#_top")+(t.id?"".concat(i,"#").concat(t.id,",").concat(this._in?this._in.selector:"#_top").concat(i,".").concat(t.id):"")).boundingClientRect();this._in?a.select(this._in.selector).scrollOffset().select(this._in.selector).boundingClientRect():a.selectViewport().scrollOffset(),a.exec((function(i){if(!i[0])return t.fail&&t.fail("Label not found");var a=i[1].scrollTop+i[0].top-(i[2]?i[2].top:0)+(t.offset||0);e._in?e._in.page[e._in.scrollTop]=a:uni.pageScrollTo({scrollTop:a,duration:300}),t.success&&t.success()}))},getVideoContext:function(t){if(!t)return this.videoContexts;for(var e=this.videoContexts.length;e--;)if(this.videoContexts[e].id==t)return this.videoContexts[e]},_handleHtml:function(t,e){if(!e){var i="<style scoped>@keyframes _show{0%{opacity:0}100%{opacity:1}}img{max-width:100%}";for(var a in l.userAgentStyles)i+="".concat(a,"{").concat(l.userAgentStyles[a],"}");for(a in this.tagStyle)i+="".concat(a,"{").concat(this.tagStyle[a],"}");i+="</style>",t=i+t}return t.includes("rpx")&&(t=t.replace(/[0-9.]+\s*rpx/g,(function(t){return parseFloat(t)*s/750+"px"}))),t}}};e.default=c}}]);